import{_ as Ae,u as Oe,r as x,c as U,o as Ee,b as i,d as t,e as p,f as r,g as d,N as Ve,q as h,s as y,t as u,w as P,v as M,O as R,P as ce,Q as ue,z as _,R as Le,A as a,B as Ie}from"./index-DsIss_bJ.js";const He={class:"space-y-6 p-4 bg-background"},Ge={class:"card"},qe={class:"mb-6"},Ke={class:"text-lg font-medium text-text-light mb-2 flex items-center"},Qe={class:"text-text-muted mb-4 flex items-center"},Ye={key:0,class:"overflow-x-auto"},Ze={class:"min-w-full divide-y divide-border"},Je={class:"bg-background-mute"},Xe={class:"px-4 py-3 text-left text-xs font-medium text-text-light uppercase tracking-wider"},et={class:"px-4 py-3 text-left text-xs font-medium text-text-light uppercase tracking-wider"},tt={class:"px-4 py-3 text-left text-xs font-medium text-text-light uppercase tracking-wider"},st={class:"px-4 py-3 text-left text-xs font-medium text-text-light uppercase tracking-wider"},ot={class:"px-4 py-3 text-left text-xs font-medium text-text-light uppercase tracking-wider"},lt={class:"px-4 py-3 text-left text-xs font-medium text-text-light uppercase tracking-wider"},nt={class:"px-4 py-3 text-left text-xs font-medium text-text-light uppercase tracking-wider"},rt={class:"bg-background-soft divide-y divide-border"},it={class:"px-4 py-3 text-text-light"},at={class:"px-4 py-3 text-text-light"},dt={class:"px-4 py-3 text-text-light"},ct={class:"px-4 py-3 text-text-light"},ut={class:"px-4 py-3"},mt={class:"flex flex-wrap gap-1"},ft={class:"px-4 py-3"},pt={class:"flex flex-wrap gap-1"},vt={class:"px-4 py-3"},xt={class:"flex space-x-1"},bt=["onClick"],gt=["onClick"],wt=["onClick"],ht={key:1,class:"bg-blue-50 border border-blue-200 text-blue-700 px-4 py-3 rounded flex items-start"},yt={class:"mt-4 flex justify-end"},kt={key:0,class:"space-y-6"},_t={class:"card"},Ct={class:"text-lg font-medium text-text-light flex items-center"},$t={key:0,class:"ml-2 text-sm text-blue-600"},Pt={key:1,class:"ml-2 text-sm text-green-600"},Mt={key:0,class:"mt-4 space-y-4"},jt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Bt={class:"form-label flex items-center"},Ft={class:"form-label flex items-center"},St={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Dt={class:"form-label flex items-center"},Rt={class:"form-label flex items-center"},zt={class:"form-label flex items-center"},Nt={class:"card"},Tt={class:"text-lg font-medium text-text-light flex items-center"},Ut={key:0,class:"ml-2 text-sm text-blue-600"},Wt={key:0,class:"mt-4 space-y-4"},At={class:"bg-background-soft border border-border rounded-lg p-3 min-h-[60px]"},Ot={key:0,class:"flex flex-wrap gap-2"},Et=["onClick"],Vt={key:1,class:"text-text-muted text-sm flex items-center"},Lt={class:"relative"},It={class:"flex items-center"},Ht={key:0,class:"absolute z-10 w-full mt-1 bg-background-soft border border-border rounded-lg shadow-lg max-h-60 overflow-y-auto"},Gt={key:0,class:"p-2"},qt=["onClick"],Kt={key:1,class:"p-4 text-text-muted text-center"},Qt={key:0,class:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg"},Yt={class:"text-yellow-600 mb-2 flex items-center"},Zt={class:"flex flex-wrap gap-2"},Jt=["onClick"],Xt={class:"flex"},es={class:"card"},ts={class:"text-lg font-medium text-text-light flex items-center"},ss={key:0,class:"ml-2 text-sm text-green-600"},os={key:0,class:"mt-4"},ls={class:"border border-border rounded-lg overflow-hidden"},ns={class:"bg-background-mute border-b border-border"},rs={class:"flex overflow-x-auto"},is={class:"flex items-center"},as=["onClick"],ds={class:"flex items-center min-w-0 mr-2"},cs={class:"truncate"},us={class:"ml-1 text-xs opacity-75 flex-shrink-0"},ms=["onClick"],fs={key:0,class:"p-4 space-y-4"},ps={class:"form-label flex items-center"},vs={class:"bg-background-soft border border-border rounded-lg p-3"},xs={class:"grid grid-cols-2 gap-4 text-sm"},bs={class:"flex items-center"},gs={class:"ml-1 font-medium text-text-light"},ws={class:"flex items-center"},hs={class:"ml-1 font-medium text-text-light"},ys={class:"flex justify-between items-center mb-2"},ks={class:"form-label flex items-center mb-0"},_s={class:"bg-background-soft border border-border rounded-lg p-3 min-h-[60px] mb-2"},Cs={key:0,class:"space-y-2"},$s={class:"flex-1 min-w-0"},Ps={class:"text-sm font-medium text-text-light truncate"},Ms={class:"text-xs text-text-muted"},js={class:"inline-flex items-center mr-2"},Bs={key:0,class:"inline-flex items-center mr-2"},Fs={key:1,class:"inline-flex items-center"},Ss=["onClick"],Ds={key:1,class:"text-text-muted text-sm flex items-center"},Rs={key:1,class:"p-8 text-center"},zs={class:"card"},Ns={class:"flex justify-between items-center"},Ts={class:"flex space-x-3"},Us={type:"submit",class:"btn btn-primary"},Ws={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},As={class:"bg-background rounded-lg shadow-xl max-w-4xl w-full max-h-[80vh] overflow-hidden mx-4"},Os={class:"flex justify-between items-center p-4 border-b border-border"},Es={class:"text-lg font-semibold text-text-light"},Vs={class:"border-b border-border bg-background-mute"},Ls={class:"flex items-center"},Is={key:0,class:"ml-2 text-sm text-blue-600"},Hs={key:0,class:"px-4 pb-4"},Gs={class:"flex items-center space-x-4"},qs={class:"flex-1"},Ks={class:"form-label text-sm flex items-center mb-1"},Qs={class:"flex flex-col"},Ys=["disabled"],Zs={class:"text-xs text-text-muted text-center"},Js={key:0,class:"mt-3"},Xs={class:"flex flex-wrap gap-1"},eo=["onClick"],to={class:"text-md font-medium text-text-light mb-3 flex items-center"},so={class:"ml-2 text-sm text-text-muted"},oo={class:"grid grid-cols-1 gap-2"},lo=["onClick"],no=["checked"],ro={class:"flex-1 min-w-0"},io={class:"text-sm font-medium text-text-light"},ao={class:"text-xs text-text-muted"},co={class:"inline-flex items-center mr-2"},uo={key:0,class:"inline-flex items-center mr-2"},mo={key:1,class:"inline-flex items-center"},fo={key:0,class:"text-center py-8"},po={class:"flex justify-end space-x-3 p-4 border-t border-border bg-background-mute"},vo={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999]"},xo={class:"bg-background rounded-lg shadow-xl max-w-md w-full mx-4"},bo={class:"flex justify-between items-center p-4 border-b border-border"},go={class:"p-4"},wo={class:"form-label flex items-center mb-2"},ho={class:"flex justify-end space-x-3 p-4 border-t border-border bg-background-mute"},yo=["disabled"],ko={__name:"BundleManagerComponent",setup(_o){const{success:C,error:g,confirm:q}=Oe(),W=x([]),K=x([]),z=x({}),S=x(!1),Q=x(!1),D=x(""),$=x([]),w=x(""),j=x(!1),v=x(""),b=x(""),B=x(""),Y=x({top:"0px",left:"0px"}),Z=x(!1),F=x(""),A=x(!0),O=x(!0),E=x(!0),V=x(!1),l=x({id:"",name:"",description:"",version:"1.0.0",author:"",website:"",workflows:[],hardware_profiles:{}}),ee=U(()=>l.value.workflows?l.value.workflows.filter(o=>!K.value.includes(o)):[]),te=U(()=>K.value.filter(o=>!l.value.workflows.includes(o))),J=U(()=>{if(!w.value.trim())return z.value;const o=w.value.split(",").map(s=>s.trim().toLowerCase()).filter(s=>s.length>0);if(o.length===0)return z.value;const e={};for(const[s,c]of Object.entries(z.value)){const n=c.filter(m=>{if(!m.tags||m.tags.length===0)return!1;const f=m.tags.map(k=>k.toLowerCase());return o.some(k=>f.some(N=>N.includes(k)))});n.length>0&&(e[s]=n)}return e}),se=U(()=>{const o={};for(const e of Object.values(z.value))for(const s of e)if(s.tags&&s.tags.length>0)for(const c of s.tags)o[c]=(o[c]||0)+1;return Object.entries(o).sort((e,s)=>s[1]-e[1]).slice(0,8).map(([e])=>e)}),oe=U(()=>Object.values(J.value).reduce((o,e)=>o+e.length,0)),L=async()=>{try{const o=await _.get("/bundles/");W.value=o.data||[]}catch(o){console.error("Error loading bundles:",o),g("Failed to load bundles")}},le=async()=>{try{const o=await _.get("/workflows/");K.value=o.data||[]}catch(o){console.error("Error loading workflows:",o),g("Failed to load workflows")}},me=async()=>{var o;try{const e=await _.get("/jsonmodels/");z.value=((o=e.data)==null?void 0:o.groups)||{}}catch(e){console.error("Error loading models:",e),g("Failed to load model groups")}},fe=async()=>{var o,e;try{if(l.value.id){const s={name:l.value.name,description:l.value.description,version:l.value.version,author:l.value.author||null,website:l.value.website||null,workflows:l.value.workflows,hardware_profiles:l.value.hardware_profiles};await _.put(`/bundles/${l.value.id}`,s),C(`Bundle "${l.value.name}" updated successfully`,5e3,!0),await L()}else{const s={name:l.value.name,description:l.value.description,version:l.value.version,author:l.value.author||null,website:l.value.website||null,workflows:l.value.workflows,hardware_profiles:l.value.hardware_profiles};await _.post("/bundles/",s),C(`Bundle "${l.value.name}" created successfully`,5e3,!0),await L(),G()}}catch(s){console.error("Error saving bundle:",s),g("Failed to save bundle: "+(((e=(o=s.response)==null?void 0:o.data)==null?void 0:e.detail)||s.message),8e3,!0)}},pe=async o=>{var e,s;try{const c=new FormData;c.append("workflow_file",o),await _.post("/workflows/upload",c,{headers:{"Content-Type":"multipart/form-data"}}),C(`Workflow "${o.name}" uploaded successfully`),await le()}catch(c){console.error("Error uploading workflow:",c),g("Failed to upload workflow: "+(((s=(e=c.response)==null?void 0:e.data)==null?void 0:s.detail)||c.message))}},ve=()=>{G(),V.value=!0},xe=()=>{V.value=!1,G()},be=async o=>{try{if(await q(`Are you sure you want to remove "${o}" from this bundle?`,"Confirm Removal")){const s=l.value.workflows.indexOf(o);s!==-1&&(l.value.workflows.splice(s,1),C(`Workflow "${o}" removed from bundle`))}}catch(e){g("Failed to remove workflow from bundle: "+e.message)}},ge=async o=>{const e=o.target.files[0];e&&(await pe(e),o.target.value="")},we=()=>{document.getElementById("workflow-file").click()},ne=o=>o.dest?o.dest.split("/").pop():o.url?o.url.split("/").pop():"Unknown model",I=o=>{if(!o)return"Unknown size";const e=["B","KB","MB","GB","TB"],s=Math.floor(Math.log(o)/Math.log(1024));return`${(o/Math.pow(1024,s)).toFixed(1)} ${e[s]}`},he=o=>{var e;D.value=o,$.value=[...((e=l.value.hardware_profiles[o])==null?void 0:e.models)||[]],w.value="",j.value=!1,Q.value=!0},X=()=>{Q.value=!1,D.value="",$.value=[],w.value="",j.value=!1},ye=()=>{w.value=""},ke=o=>{const e=w.value.split(",").map(s=>s.trim()).filter(s=>s.length>0);e.includes(o)||(e.push(o),w.value=e.join(", "))},_e=o=>{const e=$.value.findIndex(s=>s.url===o.url&&s.dest===o.dest);e!==-1?$.value.splice(e,1):$.value.push({...o})},Ce=o=>$.value.some(e=>e.url===o.url&&e.dest===o.dest),$e=()=>{l.value.hardware_profiles[D.value]||(l.value.hardware_profiles[D.value]={description:"",models:[]}),l.value.hardware_profiles[D.value].models=[...$.value],X()},Pe=(o,e)=>{var s;(s=l.value.hardware_profiles[o])!=null&&s.models&&l.value.hardware_profiles[o].models.splice(e,1)},re=o=>!o.models||o.models.length===0?0:o.models.reduce((e,s)=>e+(s.size||0),0);Ee(async()=>{await Promise.all([L(),le(),me()]),document.addEventListener("click",o=>{o.target.closest(".relative")||ie(),je(o)})});const ie=()=>{S.value=!1,b.value=""},Me=(o,e)=>{if(b.value===o)b.value="";else{b.value=o;const s=e.target.getBoundingClientRect();Y.value={top:s.bottom+window.scrollY+4+"px",left:s.right-150+"px"}}},je=o=>{o.target.closest(".profile-actions-container")||(b.value="")},Be=o=>{B.value=o,F.value=o,b.value="",Z.value=!0,Le(()=>{const e=document.querySelector('input[ref="renameProfileInput"]');e&&(e.focus(),e.select())})},ae=()=>{if(B.value&&F.value.trim()){const o=F.value.trim();o!==B.value&&De(B.value,o)}H()},H=()=>{B.value="",F.value="",Z.value=!1},Fe=o=>{const e=l.value.hardware_profiles[o];if(!e)return;let s=`${o} Copy`,c=1;for(;l.value.hardware_profiles[s];)s=`${o} Copy ${c}`,c++;l.value.hardware_profiles[s]={description:e.description,models:[...e.models||[]]},v.value=s,b.value="",C(`Profile "${o}" cloned as "${s}"`)},de=()=>{let o="New Profile",e=1;for(;l.value.hardware_profiles[o];)o=`New Profile ${e}`,e++;l.value.hardware_profiles[o]={description:"",models:[]},v.value=o,b.value=""},Se=async o=>{try{if(await q(`Are you sure you want to delete profile "${o}"?`,"Confirm Delete")){if(delete l.value.hardware_profiles[o],v.value===o){const s=Object.keys(l.value.hardware_profiles);v.value=s.length>0?s[0]:""}b.value="",C(`Profile "${o}" deleted successfully`)}}catch(e){g("Failed to delete profile: "+e.message)}},De=(o,e)=>{const s=e.trim();if(!s||s===o){B.value="";return}if(l.value.hardware_profiles[s]){g(`Profile name "${s}" already exists`);return}const c=l.value.hardware_profiles[o];l.value.hardware_profiles[s]={description:c.description,models:[...c.models||[]]},delete l.value.hardware_profiles[o],v.value=s,b.value="",C(`Profile renamed from "${o}" to "${s}"`)},G=()=>{l.value={id:"",name:"",description:"",version:"1.0.0",author:"",website:"",workflows:[],hardware_profiles:{}},v.value="",b.value="",B.value="",ie()},Re=o=>{l.value.workflows.includes(o)||l.value.workflows.push(o),S.value=!1},ze=o=>{const e=l.value.workflows.indexOf(o);e!==-1&&l.value.workflows.splice(e,1)},Ne=async o=>{try{const s=(await _.get(`/bundles/${o}`)).data;l.value={id:s.id,name:s.name,description:s.description,version:s.version||"1.0.0",author:s.author||"",website:s.website||"",workflows:s.workflows||[],hardware_profiles:s.hardware_profiles||{}};const c=Object.keys(l.value.hardware_profiles);c.length>0&&(v.value=c[0]),V.value=!0}catch(e){console.error("Error loading bundle for editing:",e),g("Failed to load bundle for editing")}},Te=async o=>{var e,s;try{const c=W.value.find(f=>f.id===o),n=c?c.name:o;await q(`Are you sure you want to delete bundle "${n}"?`,"Confirm Deletion")&&(await _.delete(`/bundles/${o}`),C(`Bundle "${n}" deleted successfully`),await L())}catch(c){console.error("Error deleting bundle:",c),g("Failed to delete bundle: "+(((s=(e=c.response)==null?void 0:e.data)==null?void 0:s.detail)||c.message))}},Ue=async()=>{await fe()},We=async(o,e)=>{var s,c;try{const m=(await _.get(`/bundles/${o}`)).data,f=await _.get(`/bundles/export/${o}`,{responseType:"blob"}),k=new Blob([f.data],{type:"application/zip"}),N=window.URL.createObjectURL(k),T=document.createElement("a");T.href=N,T.download=`bundle_${e.replace(/\s+/g,"_")}_v${m.version||"1.0.0"}.zip`,document.body.appendChild(T),T.click(),document.body.removeChild(T),window.URL.revokeObjectURL(N),C(`Bundle "${e}" downloaded successfully`)}catch(n){console.error("Error downloading bundle:",n),g("Failed to download bundle: "+(((c=(s=n.response)==null?void 0:s.data)==null?void 0:c.detail)||n.message))}};return(o,e)=>{var c;const s=Ve("FontAwesomeIcon");return a(),i("div",He,[t("div",Ge,[e[33]||(e[33]=t("h2",{class:"text-xl font-semibold text-text-light mb-4"},"Bundle Manager",-1)),t("div",qe,[t("h4",Ke,[r(s,{icon:"box-open",class:"mr-2"}),e[19]||(e[19]=d("Model Bundles "))]),t("p",Qe,[r(s,{icon:"info-circle",class:"mr-2"}),e[20]||(e[20]=d("Create predefined bundles of models with associated workflows. "))]),Object.keys(W.value).length>0?(a(),i("div",Ye,[t("table",Ze,[t("thead",Je,[t("tr",null,[t("th",Xe,[r(s,{icon:"tag",class:"mr-1"}),e[21]||(e[21]=d("Name "))]),t("th",et,[r(s,{icon:"code-branch",class:"mr-1"}),e[22]||(e[22]=d("Version "))]),t("th",tt,[r(s,{icon:"user",class:"mr-1"}),e[23]||(e[23]=d("Author "))]),t("th",st,[r(s,{icon:"info",class:"mr-1"}),e[24]||(e[24]=d("Description "))]),t("th",ot,[r(s,{icon:"sitemap",class:"mr-1"}),e[25]||(e[25]=d("Workflows "))]),t("th",lt,[r(s,{icon:"server",class:"mr-1"}),e[26]||(e[26]=d("Hardware Profiles "))]),t("th",nt,[r(s,{icon:"cogs",class:"mr-1"}),e[27]||(e[27]=d("Actions "))])])]),t("tbody",rt,[(a(!0),i(h,null,y(W.value,n=>(a(),i("tr",{key:n.id,class:"hover:bg-background-mute"},[t("td",it,u(n.name),1),t("td",at,u(n.version||"1.0.0"),1),t("td",dt,u(n.author||"N/A"),1),t("td",ct,u(n.description),1),t("td",ut,[t("div",mt,[(a(!0),i(h,null,y(n.workflows||[],m=>(a(),i("span",{key:m,class:"inline-flex items-center px-2 py-1 rounded text-xs bg-blue-600 text-white"},[r(s,{icon:"file-code",class:"mr-1"}),d(u(m),1)]))),128))])]),t("td",ft,[t("div",pt,[(a(!0),i(h,null,y(n.hardware_profiles||{},(m,f)=>{var k;return a(),i("span",{key:f,class:"inline-flex items-center px-2 py-1 rounded text-xs bg-gray-600 text-white"},[r(s,{icon:"microchip",class:"mr-1"}),d(u(f)+" ("+u(((k=m.models)==null?void 0:k.length)||0)+" models) ",1)])}),128))])]),t("td",vt,[t("div",xt,[t("button",{class:"px-3 py-1 text-xs bg-btn-default text-white rounded hover:bg-btn-default-hover transition-colors",onClick:m=>Ne(n.id)},[r(s,{icon:"edit",class:"mr-1"}),e[28]||(e[28]=d("Edit "))],8,bt),t("button",{class:"px-3 py-1 text-xs bg-green-600 text-white rounded hover:bg-green-700 transition-colors",onClick:m=>We(n.id,n.name),title:"Download bundle as ZIP"},[r(s,{icon:"download",class:"mr-1"}),e[29]||(e[29]=d("Download "))],8,gt),t("button",{class:"px-3 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700 transition-colors",onClick:m=>Te(n.id)},[r(s,{icon:"trash-alt",class:"mr-1"}),e[30]||(e[30]=d("Delete "))],8,wt)])])]))),128))])])])):(a(),i("div",ht,[r(s,{icon:"info-circle",class:"mr-2 mt-0.5"}),e[31]||(e[31]=t("span",null,"No bundles available. Create your first bundle below.",-1))])),t("div",yt,[t("button",{type:"button",class:"btn btn-primary",onClick:ve},[r(s,{icon:"plus-circle",class:"mr-1"}),e[32]||(e[32]=d("New Bundle "))])])])]),V.value?(a(),i("div",kt,[t("form",{onSubmit:R(Ue,["prevent"]),class:"space-y-6"},[t("div",_t,[t("div",{class:"flex justify-between items-center cursor-pointer p-1 -m-1 rounded hover:bg-background-soft transition-colors",onClick:e[0]||(e[0]=n=>A.value=!A.value)},[t("h4",Ct,[r(s,{icon:"info-circle",class:"mr-2"}),e[34]||(e[34]=d("General Information ")),l.value.id?(a(),i("span",$t,"(Editing: "+u(l.value.name)+")",1)):(a(),i("span",Pt,"(New Bundle)"))]),r(s,{icon:A.value?"chevron-up":"chevron-down",class:"text-text-muted"},null,8,["icon"])]),A.value?(a(),i("div",Mt,[t("div",jt,[t("div",null,[t("label",Bt,[r(s,{icon:"tag",class:"mr-2"}),e[35]||(e[35]=d("Name "))]),P(t("input",{type:"text",class:"form-input w-full","onUpdate:modelValue":e[1]||(e[1]=n=>l.value.name=n),required:""},null,512),[[M,l.value.name]])]),t("div",null,[t("label",Ft,[r(s,{icon:"code-branch",class:"mr-2"}),e[36]||(e[36]=d("Version "))]),P(t("input",{type:"text",class:"form-input w-full","onUpdate:modelValue":e[2]||(e[2]=n=>l.value.version=n),placeholder:"1.0.0",pattern:"^\\d+\\.\\d+\\.\\d+$",title:"Version must be in x.y.z format (e.g., 1.0.0)"},null,512),[[M,l.value.version]])])]),t("div",St,[t("div",null,[t("label",Dt,[r(s,{icon:"user",class:"mr-2"}),e[37]||(e[37]=d("Author "))]),P(t("input",{type:"text",class:"form-input w-full","onUpdate:modelValue":e[3]||(e[3]=n=>l.value.author=n),placeholder:"Bundle author"},null,512),[[M,l.value.author]])]),t("div",null,[t("label",Rt,[r(s,{icon:"globe",class:"mr-2"}),e[38]||(e[38]=d("Website "))]),P(t("input",{type:"url",class:"form-input w-full","onUpdate:modelValue":e[4]||(e[4]=n=>l.value.website=n),placeholder:"https://example.com"},null,512),[[M,l.value.website]])])]),t("div",null,[t("label",zt,[r(s,{icon:"info",class:"mr-2"}),e[39]||(e[39]=d("Description "))]),P(t("textarea",{class:"form-input w-full","onUpdate:modelValue":e[5]||(e[5]=n=>l.value.description=n),rows:"3",placeholder:"Describe your bundle..."},null,512),[[M,l.value.description]])])])):p("",!0)]),t("div",Nt,[t("div",{class:"flex justify-between items-center cursor-pointer p-1 -m-1 rounded hover:bg-background-soft transition-colors",onClick:e[6]||(e[6]=n=>O.value=!O.value)},[t("h4",Tt,[r(s,{icon:"sitemap",class:"mr-2"}),e[40]||(e[40]=d("Workflows ")),l.value.workflows.length>0?(a(),i("span",Ut," ("+u(l.value.workflows.length)+" selected) ",1)):p("",!0)]),r(s,{icon:O.value?"chevron-up":"chevron-down",class:"text-text-muted"},null,8,["icon"])]),O.value?(a(),i("div",Wt,[t("div",At,[l.value.workflows.length>0?(a(),i("div",Ot,[(a(!0),i(h,null,y(l.value.workflows,n=>(a(),i("span",{key:n,class:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-600 text-white group"},[r(s,{icon:"file-code",class:"mr-1"}),d(u(n)+" ",1),t("button",{type:"button",class:"ml-2 w-4 h-4 flex items-center justify-center rounded-full bg-blue-500 hover:bg-red-500 text-white text-xs transition-colors duration-200 flex-shrink-0",onClick:R(m=>ze(n),["stop"]),title:"Remove workflow"},[r(s,{icon:"times"})],8,Et)]))),128))])):(a(),i("div",Vt,[r(s,{icon:"info-circle",class:"mr-1"}),e[41]||(e[41]=d("No workflows selected. Choose from the dropdown below. "))]))]),t("div",Lt,[t("button",{type:"button",class:"form-input w-full text-left flex items-center justify-between",onClick:e[7]||(e[7]=n=>S.value=!S.value)},[t("span",It,[r(s,{icon:"plus-circle",class:"mr-2"}),e[42]||(e[42]=d("Add Workflows "))]),r(s,{icon:S.value?"chevron-up":"chevron-down"},null,8,["icon"])]),S.value?(a(),i("div",Ht,[te.value.length>0?(a(),i("div",Gt,[(a(!0),i(h,null,y(te.value,n=>(a(),i("div",{key:n,class:"flex items-center px-3 py-2 hover:bg-background-mute cursor-pointer rounded",onClick:m=>Re(n)},[r(s,{icon:"file-code",class:"mr-2 text-blue-600"}),t("span",null,u(n),1)],8,qt))),128))])):(a(),i("div",Kt,[r(s,{icon:"info-circle",class:"mr-1"}),e[43]||(e[43]=d("All workflows are already selected "))]))])):p("",!0)]),ee.value.length>0?(a(),i("div",Qt,[t("div",Yt,[r(s,{icon:"exclamation-triangle",class:"mr-1"}),e[44]||(e[44]=t("strong",null,"Missing workflows:",-1)),e[45]||(e[45]=t("span",{class:"ml-1 text-sm"},"These workflows are referenced in this bundle but are not available in the system.",-1))]),t("div",Zt,[(a(!0),i(h,null,y(ee.value,n=>(a(),i("span",{key:n,class:"inline-flex items-center px-2 py-1 rounded text-xs bg-yellow-100 text-yellow-800 group"},[r(s,{icon:"file-code",class:"mr-1"}),d(u(n)+" ",1),t("button",{type:"button",class:"ml-2 w-4 h-4 flex items-center justify-center rounded-full bg-yellow-400 hover:bg-red-500 text-yellow-800 hover:text-white text-xs transition-colors duration-200 flex-shrink-0",onClick:R(m=>be(n),["stop"]),title:"Remove missing workflow"},[r(s,{icon:"times"})],8,Jt)]))),128))])])):p("",!0),t("div",Xt,[t("input",{type:"file",class:"form-input flex-1 rounded-r-none",id:"workflow-file",onChange:ge,accept:".json"},null,32),t("button",{class:"btn btn-outline rounded-l-none border-l-0",type:"button",onClick:we},[r(s,{icon:"upload",class:"mr-1"}),e[46]||(e[46]=d("Upload New Workflow "))])])])):p("",!0)]),t("div",es,[t("div",{class:"flex justify-between items-center cursor-pointer p-1 -m-1 rounded hover:bg-background-soft transition-colors",onClick:e[8]||(e[8]=n=>E.value=!E.value)},[t("h4",ts,[r(s,{icon:"server",class:"mr-2"}),e[47]||(e[47]=d("Hardware Profiles & Models ")),Object.keys(l.value.hardware_profiles).length>0?(a(),i("span",ss," ("+u(Object.keys(l.value.hardware_profiles).length)+" profiles) ",1)):p("",!0)]),r(s,{icon:E.value?"chevron-up":"chevron-down",class:"text-text-muted"},null,8,["icon"])]),E.value?(a(),i("div",os,[t("div",ls,[t("div",ns,[t("div",rs,[(a(!0),i(h,null,y(l.value.hardware_profiles,(n,m)=>(a(),i("div",{key:m,class:"flex-shrink-0 border-r border-border relative"},[t("div",is,[t("button",{type:"button",class:Ie(["flex-1 px-4 py-3 text-sm font-medium transition-colors flex items-center min-w-0",v.value===m?"bg-background text-text-light border-b-2 border-primary":"text-text-muted hover:text-text-light hover:bg-background-soft"]),onClick:f=>v.value=m},[t("div",ds,[r(s,{icon:"microchip",class:"mr-2 flex-shrink-0"}),t("span",cs,u(m),1),t("span",us,"("+u(I(re(n)))+")",1)])],10,as),t("button",{type:"button",class:"ml-2 p-1 text-xs text-text-muted hover:text-text-light hover:bg-background-soft rounded flex-shrink-0 profile-actions-container",onClick:R(f=>Me(m,f),["stop"]),title:"Profile actions"},[r(s,{icon:"cogs"})],8,ms)])]))),128)),t("button",{type:"button",class:"flex-shrink-0 px-4 py-3 text-sm font-medium text-text-muted hover:text-text-light hover:bg-background-soft transition-colors flex items-center",onClick:de},[r(s,{icon:"plus",class:"mr-1"})])])]),v.value&&l.value.hardware_profiles[v.value]?(a(),i("div",fs,[t("div",null,[t("label",ps,[r(s,{icon:"info",class:"mr-2"}),e[48]||(e[48]=d("Description "))]),P(t("input",{type:"text",class:"form-input w-full","onUpdate:modelValue":e[9]||(e[9]=n=>l.value.hardware_profiles[v.value].description=n),placeholder:"Profile description"},null,512),[[M,l.value.hardware_profiles[v.value].description]])]),t("div",vs,[t("div",xs,[t("div",bs,[r(s,{icon:"cubes",class:"mr-2 text-primary"}),e[49]||(e[49]=t("span",{class:"text-text-muted"},"Models:",-1)),t("span",gs,u(((c=l.value.hardware_profiles[v.value].models)==null?void 0:c.length)||0),1)]),t("div",ws,[r(s,{icon:"database",class:"mr-2 text-primary"}),e[50]||(e[50]=t("span",{class:"text-text-muted"},"Total Size:",-1)),t("span",hs,u(I(re(l.value.hardware_profiles[v.value]))),1)])])]),t("div",null,[t("div",ys,[t("label",ks,[r(s,{icon:"cubes",class:"mr-2"}),e[51]||(e[51]=d("Models for this Profile "))]),t("button",{type:"button",class:"btn btn-sm btn-outline",onClick:e[10]||(e[10]=n=>he(v.value))},[r(s,{icon:"plus-circle",class:"mr-1"}),e[52]||(e[52]=d("Add Models "))])]),t("div",_s,[l.value.hardware_profiles[v.value].models&&l.value.hardware_profiles[v.value].models.length>0?(a(),i("div",Cs,[(a(!0),i(h,null,y(l.value.hardware_profiles[v.value].models,(n,m)=>(a(),i("div",{key:m,class:"flex items-center justify-between p-2 bg-background rounded border"},[t("div",$s,[t("div",Ps,u(ne(n)),1),t("div",Ms,[t("span",js,[r(s,{icon:"tag",class:"mr-1"}),d(u(n.type),1)]),n.tags&&n.tags.length>0?(a(),i("span",Bs,[r(s,{icon:"tags",class:"mr-1"}),d(u(n.tags.join(", ")),1)])):p("",!0),n.size?(a(),i("span",Fs,[r(s,{icon:"database",class:"mr-1"}),d(u(I(n.size)),1)])):p("",!0)])]),t("button",{type:"button",class:"ml-2 text-red-600 hover:text-red-800",onClick:f=>Pe(v.value,m),title:"Remove model"},[r(s,{icon:"trash-alt"})],8,Ss)]))),128))])):(a(),i("div",Ds,[r(s,{icon:"info-circle",class:"mr-1"}),e[53]||(e[53]=d("No models selected for this profile. "))]))])])])):p("",!0),Object.keys(l.value.hardware_profiles).length===0?(a(),i("div",Rs,[r(s,{icon:"server",class:"text-4xl text-text-muted mb-4"}),e[55]||(e[55]=t("h4",{class:"text-lg font-medium text-text-light mb-2"},"No Hardware Profiles",-1)),e[56]||(e[56]=t("p",{class:"text-text-muted mb-4"},"Create your first hardware profile to start adding models.",-1)),t("button",{type:"button",class:"btn btn-primary",onClick:de},[r(s,{icon:"plus-circle",class:"mr-1"}),e[54]||(e[54]=d("Create First Profile "))])])):p("",!0)])])):p("",!0)]),t("div",zs,[t("div",Ns,[t("button",{type:"button",class:"btn btn-secondary",onClick:xe},[r(s,{icon:"times",class:"mr-1"}),e[57]||(e[57]=d("Cancel "))]),t("div",Ts,[t("button",{type:"button",class:"btn btn-outline",onClick:G},[r(s,{icon:"undo",class:"mr-1"}),e[58]||(e[58]=d("Reset Form "))]),t("button",Us,[r(s,{icon:l.value.id?"save":"plus",class:"mr-1"},null,8,["icon"]),d(" "+u(l.value.id?"Update":"Create")+" Bundle ",1)])])])])],32)])):p("",!0),b.value?(a(),i("div",{key:1,class:"fixed bg-background border border-border rounded shadow-lg z-[9999] min-w-[150px] profile-actions-container",style:ce({top:Y.value.top,left:Y.value.left}),onClick:e[14]||(e[14]=R(()=>{},["stop"]))},[t("button",{type:"button",class:"w-full px-3 py-2 text-left text-sm text-text-light hover:bg-background-soft flex items-center",onClick:e[11]||(e[11]=n=>Be(b.value))},[r(s,{icon:"edit",class:"mr-2"}),e[59]||(e[59]=d("Rename "))]),t("button",{type:"button",class:"w-full px-3 py-2 text-left text-sm text-text-light hover:bg-background-soft flex items-center",onClick:e[12]||(e[12]=n=>Fe(b.value))},[r(s,{icon:"copy",class:"mr-2"}),e[60]||(e[60]=d("Clone "))]),t("button",{type:"button",class:"w-full px-3 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center",onClick:e[13]||(e[13]=n=>Se(b.value))},[r(s,{icon:"trash-alt",class:"mr-2"}),e[61]||(e[61]=d("Delete "))])],4)):p("",!0),Q.value?(a(),i("div",Ws,[t("div",As,[t("div",Os,[t("h3",Es,"Select Models for "+u(D.value),1),t("button",{type:"button",class:"text-text-muted hover:text-text-light",onClick:X},[r(s,{icon:"times",class:"text-xl"})])]),t("div",Vs,[t("button",{type:"button",class:"w-full px-4 py-3 flex items-center justify-between hover:bg-background transition-colors",onClick:e[15]||(e[15]=n=>j.value=!j.value)},[t("div",Ls,[r(s,{icon:"filter",class:"mr-2"}),e[62]||(e[62]=t("span",{class:"font-medium text-text-light"},"Filter Models",-1)),w.value?(a(),i("span",Is,"("+u(oe.value)+" models)",1)):p("",!0)]),r(s,{icon:j.value?"chevron-up":"chevron-down",class:"text-text-muted"},null,8,["icon"])]),j.value?(a(),i("div",Hs,[t("div",Gs,[t("div",qs,[t("label",Ks,[r(s,{icon:"search",class:"mr-2"}),e[63]||(e[63]=d("Filter by Tags "))]),P(t("input",{type:"text",class:"form-input w-full text-sm","onUpdate:modelValue":e[16]||(e[16]=n=>w.value=n),placeholder:"Enter tags to filter models (e.g., base, fp8, nsfw...)"},null,512),[[M,w.value]]),e[64]||(e[64]=t("p",{class:"text-xs text-text-muted mt-1"}," Separate multiple tags with commas. Models matching any of these tags will be shown. ",-1))]),t("div",Qs,[t("button",{type:"button",class:"btn btn-sm btn-outline mb-2",onClick:ye,disabled:!w.value},[r(s,{icon:"times",class:"mr-1"}),e[65]||(e[65]=d("Clear "))],8,Ys),t("div",Zs,u(oe.value)+" models ",1)])]),se.value.length>0?(a(),i("div",Js,[e[66]||(e[66]=t("label",{class:"text-xs text-text-muted mb-2 block"},"Popular tags:",-1)),t("div",Xs,[(a(!0),i(h,null,y(se.value,n=>(a(),i("button",{key:n,type:"button",class:"px-2 py-1 text-xs rounded bg-gray-200 hover:bg-gray-300 text-gray-700 transition-colors",onClick:m=>ke(n)},u(n),9,eo))),128))])])):p("",!0)])):p("",!0)]),t("div",{class:"p-4 overflow-y-auto",style:ce({"max-height":j.value?"45vh":"55vh"})},[(a(!0),i(h,null,y(J.value,(n,m)=>(a(),i("div",{key:m,class:"mb-6"},[t("h4",to,[r(s,{icon:"folder",class:"mr-2"}),d(u(m)+" ",1),t("span",so,"("+u(n.length)+" models)",1)]),t("div",oo,[(a(!0),i(h,null,y(n,(f,k)=>(a(),i("div",{key:k,class:"flex items-center p-3 border border-border rounded hover:bg-background-mute cursor-pointer",onClick:N=>_e(f)},[t("input",{type:"checkbox",checked:Ce(f),class:"mr-3",onClick:e[17]||(e[17]=R(()=>{},["stop"]))},null,8,no),t("div",ro,[t("div",io,u(ne(f)),1),t("div",ao,[t("span",co,[r(s,{icon:"tag",class:"mr-1"}),d(u(f.type),1)]),f.tags&&f.tags.length>0?(a(),i("span",uo,[r(s,{icon:"tags",class:"mr-1"}),d(u(f.tags.join(", ")),1)])):p("",!0),f.size?(a(),i("span",mo,[r(s,{icon:"database",class:"mr-1"}),d(u(I(f.size)),1)])):p("",!0)])])],8,lo))),128))])]))),128)),Object.keys(J.value).length===0?(a(),i("div",fo,[r(s,{icon:"search",class:"text-4xl text-text-muted mb-4"}),e[67]||(e[67]=t("h4",{class:"text-lg font-medium text-text-light mb-2"},"No models found",-1)),e[68]||(e[68]=t("p",{class:"text-text-muted"}," No models match the current filter criteria. Try adjusting your tag filters. ",-1))])):p("",!0)],4),t("div",po,[t("button",{type:"button",class:"btn btn-secondary",onClick:X}," Cancel "),t("button",{type:"button",class:"btn btn-primary",onClick:$e}," Apply Selection ("+u($.value.length)+" selected) ",1)])])])):p("",!0),Z.value?(a(),i("div",vo,[t("div",xo,[t("div",bo,[e[69]||(e[69]=t("h3",{class:"text-lg font-semibold text-text-light"},"Rename Profile",-1)),t("button",{type:"button",class:"text-text-muted hover:text-text-light",onClick:H},[r(s,{icon:"times",class:"text-xl"})])]),t("div",go,[t("label",wo,[r(s,{icon:"tag",class:"mr-2"}),e[70]||(e[70]=d("Profile Name "))]),P(t("input",{ref:"renameProfileInput",type:"text",class:"form-input w-full","onUpdate:modelValue":e[18]||(e[18]=n=>F.value=n),onKeyup:[ue(ae,["enter"]),ue(H,["escape"])],placeholder:"Enter new profile name"},null,544),[[M,F.value]])]),t("div",ho,[t("button",{type:"button",class:"btn btn-secondary",onClick:H}," Cancel "),t("button",{type:"button",class:"btn btn-primary",onClick:ae,disabled:!F.value.trim()},[r(s,{icon:"save",class:"mr-1"}),e[71]||(e[71]=d("Rename "))],8,yo)])])])):p("",!0)])}}},$o=Ae(ko,[["__scopeId","data-v-91034340"]]);export{$o as default};
