import{d as V,R as C,Q as L,r as u,a3 as N,a0 as c,b as o,e as n,f as e,X as P,z as m,h as p,A as z,n as f,t as w,a2 as A,i as B,N as M}from"./index-jy5-nOjD.js";const R={class:"min-h-screen flex justify-center items-center bg-background px-4"},S={class:"card w-full max-w-md"},D={key:0,class:"mt-1 text-sm text-red-500"},E=["type"],U={key:0,class:"mt-1 text-sm text-red-500"},j={class:"flex items-center space-x-4"},F=["disabled"],T={key:0,class:"flex items-center justify-center"},q={key:1},X=V({__name:"Login",setup(H){const y=C(),x=L(),l=u(!1),b=u(!1),{success:h,error:d}=M(),v=N(),r=c({username:"",password:""}),s=c({username:"",password:""}),g=()=>{let a=!0;return s.username="",s.password="",r.username.trim()||(s.username="Please enter your username",a=!1),r.password||(s.password="Please enter your password",a=!1),a},_=async()=>{if(g()){l.value=!0;try{await v.login(r.username,r.password),h("Login successful!");const a=x.query.redirect||"/";y.push(a)}catch(a){a.response?d(a.response.data.message||"Authentication failed"):d("Network error. Please try again later.")}finally{l.value=!1}}},k=()=>{r.username="",r.password="",s.username="",s.password=""};return(a,t)=>(n(),o("div",R,[e("div",S,[t[5]||(t[5]=e("h2",{class:"text-2xl font-bold text-primary mb-6"},"Login",-1)),e("form",{onSubmit:P(_,["prevent"]),class:"space-y-6"},[e("div",null,[t[2]||(t[2]=e("label",{for:"username",class:"form-label"},"Username",-1)),m(e("input",{id:"username","onUpdate:modelValue":t[0]||(t[0]=i=>r.username=i),type:"text",class:f(["form-input",{"border-red-500":s.username}]),placeholder:"Enter your username"},null,2),[[z,r.username]]),s.username?(n(),o("p",D,w(s.username),1)):p("",!0)]),e("div",null,[t[3]||(t[3]=e("label",{for:"password",class:"form-label"},"Password",-1)),m(e("input",{id:"password","onUpdate:modelValue":t[1]||(t[1]=i=>r.password=i),type:b.value?"text":"password",class:f(["form-input",{"border-red-500":s.password}]),placeholder:"Enter your password"},null,10,E),[[A,r.password]]),s.password?(n(),o("p",U,w(s.password),1)):p("",!0)]),e("div",j,[e("button",{type:"submit",class:"btn btn-primary flex-1",disabled:l.value},[l.value?(n(),o("span",T,t[4]||(t[4]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),B(" Loading... ")]))):(n(),o("span",q,"Login"))],8,F),e("button",{type:"button",class:"btn btn-default",onClick:k}," Reset ")])],32)])]))}});export{X as default};
