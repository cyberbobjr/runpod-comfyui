import{e as u,p as k,Y as c,c as o,b as e,U as V,A as m,a as p,B as C,n as f,t as w,$ as L,d as P,Q as B,O as N,o as n,s as M}from"./index--V_irXaw.js";const U={class:"min-h-screen flex justify-center items-center bg-background px-4"},z={class:"card w-full max-w-md"},A={key:0,class:"mt-1 text-sm text-red-500"},D=["type"],E={key:0,class:"mt-1 text-sm text-red-500"},R={class:"flex items-center space-x-4"},S=["disabled"],j={key:0,class:"flex items-center justify-center"},F={key:1},H={__name:"Login",setup(T){const y=B(),x=N(),l=u(!1),b=u(!1),{success:v,error:d}=k(),r=c({username:"",password:""}),t=c({username:"",password:""}),h=()=>{let a=!0;return t.username="",t.password="",r.username.trim()||(t.username="Please enter your username",a=!1),r.password||(t.password="Please enter your password",a=!1),a},g=async()=>{if(h()){l.value=!0;try{const a=await M.post("/auth/login",{username:r.username,password:r.password});localStorage.setItem("auth_token",a.data.token),v("Login successful!");const s=x.query.redirect||"/";y.push(s)}catch(a){a.response?d(a.response.data.message||"Authentication failed"):d("Network error. Please try again later.")}finally{l.value=!1}}},_=()=>{r.username="",r.password="",t.username="",t.password=""};return(a,s)=>(n(),o("div",U,[e("div",z,[s[5]||(s[5]=e("h2",{class:"text-2xl font-bold text-primary mb-6"},"Login",-1)),e("form",{onSubmit:V(g,["prevent"]),class:"space-y-6"},[e("div",null,[s[2]||(s[2]=e("label",{for:"username",class:"form-label"},"Username",-1)),m(e("input",{id:"username","onUpdate:modelValue":s[0]||(s[0]=i=>r.username=i),type:"text",class:f(["form-input",{"border-red-500":t.username}]),placeholder:"Enter your username"},null,2),[[C,r.username]]),t.username?(n(),o("p",A,w(t.username),1)):p("",!0)]),e("div",null,[s[3]||(s[3]=e("label",{for:"password",class:"form-label"},"Password",-1)),m(e("input",{id:"password","onUpdate:modelValue":s[1]||(s[1]=i=>r.password=i),type:b.value?"text":"password",class:f(["form-input",{"border-red-500":t.password}]),placeholder:"Enter your password"},null,10,D),[[L,r.password]]),t.password?(n(),o("p",E,w(t.password),1)):p("",!0)]),e("div",R,[e("button",{type:"submit",class:"btn btn-primary flex-1",disabled:l.value},[l.value?(n(),o("span",j,s[4]||(s[4]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),P(" Loading... ")]))):(n(),o("span",F,"Login"))],8,S),e("button",{type:"button",class:"btn btn-default",onClick:_}," Reset ")])],32)])]))}};export{H as default};
