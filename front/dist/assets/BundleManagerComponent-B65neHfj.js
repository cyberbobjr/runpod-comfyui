import{_ as Oe,p as Ve,e as p,f as N,g as Le,c as i,a as x,b as t,j as n,d,R as Ie,D as h,E as y,w as U,S as R,k as me,t as c,A as $,B,U as pe,s as k,V as He,o as a,n as Ge}from"./index-BmZi0HzE.js";import{_ as E}from"./CommonCard-Cnyfhz5m.js";/* empty css                                                                           */const Ke={class:"space-y-6 p-4 bg-background"},qe={key:0,class:"card"},Ye={class:"mb-6"},Ze={class:"text-lg font-medium text-text-light mb-2 flex items-center"},Je={class:"text-text-muted mb-4 flex items-center"},Qe={key:0,class:"overflow-x-auto"},Xe={class:"min-w-full divide-y divide-border"},et={class:"bg-background-mute"},tt={class:"px-4 py-3 text-left text-xs font-medium text-text-light uppercase tracking-wider"},st={class:"px-4 py-3 text-left text-xs font-medium text-text-light uppercase tracking-wider"},ot={class:"px-4 py-3 text-left text-xs font-medium text-text-light uppercase tracking-wider"},lt={class:"px-4 py-3 text-left text-xs font-medium text-text-light uppercase tracking-wider"},nt={class:"px-4 py-3 text-left text-xs font-medium text-text-light uppercase tracking-wider"},rt={class:"px-4 py-3 text-left text-xs font-medium text-text-light uppercase tracking-wider"},it={class:"px-4 py-3 text-left text-xs font-medium text-text-light uppercase tracking-wider"},at={class:"bg-background-soft divide-y divide-border"},dt={class:"px-4 py-3 text-text-light"},ut={class:"px-4 py-3 text-text-light"},ct={class:"px-4 py-3 text-text-light"},ft={class:"px-4 py-3 text-text-light"},mt={class:"px-4 py-3"},pt={class:"flex flex-wrap gap-1"},xt={class:"px-4 py-3"},vt={class:"flex flex-wrap gap-1"},bt={class:"px-4 py-3"},wt={class:"flex space-x-1"},gt=["onClick"],ht=["onClick"],yt=["onClick"],kt={key:1,class:"bg-blue-50 border border-blue-200 text-blue-700 px-4 py-3 rounded flex items-start"},_t={class:"mt-4 flex justify-end"},Ct={key:1,class:"space-y-6"},$t={class:"flex items-center justify-between"},Bt={class:"flex items-center"},jt={class:"text-xl font-semibold text-text-light"},Mt={key:0},Pt={key:1},Ft={class:"flex items-center space-x-2"},St={key:0,class:"text-sm text-blue-600 flex items-center"},Dt={key:1,class:"text-sm text-green-600 flex items-center"},Rt={class:"text-lg font-medium text-text-light flex items-center"},Tt={key:0,class:"mt-4 space-y-4"},zt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Nt={class:"form-label flex items-center"},Ut={class:"form-label flex items-center"},Et={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Wt={class:"form-label flex items-center"},At={class:"form-label flex items-center"},Ot={class:"form-label flex items-center"},Vt={class:"text-lg font-medium text-text-light flex items-center"},Lt={key:0,class:"ml-2 text-sm text-blue-600"},It={key:0,class:"mt-4 space-y-4"},Ht={class:"bg-background-soft border border-border rounded-lg p-3 min-h-[60px]"},Gt={key:0,class:"flex flex-wrap gap-2"},Kt=["onClick"],qt={key:1,class:"text-text-muted text-sm flex items-center"},Yt={class:"relative"},Zt={class:"flex items-center"},Jt={key:0,class:"absolute z-10 w-full mt-1 bg-background-soft border border-border rounded-lg shadow-lg max-h-60 overflow-y-auto"},Qt={key:0,class:"p-2"},Xt=["onClick"],es={key:1,class:"p-4 text-text-muted text-center"},ts={key:0,class:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg"},ss={class:"text-yellow-600 mb-2 flex items-center"},os={class:"flex flex-wrap gap-2"},ls=["onClick"],ns={class:"flex"},rs={class:"text-lg font-medium text-text-light flex items-center"},is={key:0,class:"ml-2 text-sm text-green-600"},as={key:0,class:"mt-4"},ds={class:"border border-border rounded-lg overflow-hidden"},us={class:"bg-background-mute border-b border-border"},cs={class:"flex overflow-x-auto"},fs={class:"flex items-center"},ms=["onClick"],ps={class:"flex items-center min-w-0 mr-2"},xs={class:"truncate"},vs={class:"ml-1 text-xs opacity-75 flex-shrink-0"},bs=["onClick"],ws={key:0,class:"p-4 space-y-4"},gs={class:"form-label flex items-center"},hs={class:"bg-background-soft border border-border rounded-lg p-3"},ys={class:"grid grid-cols-2 gap-4 text-sm"},ks={class:"flex items-center"},_s={class:"ml-1 font-medium text-text-light"},Cs={class:"flex items-center"},$s={class:"ml-1 font-medium text-text-light"},Bs={class:"flex justify-between items-center mb-2"},js={class:"form-label flex items-center mb-0"},Ms={class:"bg-background-soft border border-border rounded-lg p-3 min-h-[60px] mb-2"},Ps={key:0,class:"space-y-2"},Fs={class:"flex-1 min-w-0"},Ss={class:"text-sm font-medium text-text-light truncate"},Ds={class:"text-xs text-text-muted"},Rs={class:"inline-flex items-center mr-2"},Ts={key:0,class:"inline-flex items-center mr-2"},zs={key:1,class:"inline-flex items-center"},Ns=["onClick"],Us={key:1,class:"text-text-muted text-sm flex items-center"},Es={key:1,class:"p-8 text-center"},Ws={class:"flex justify-between items-center"},As={class:"flex space-x-3"},Os={type:"submit",class:"btn btn-primary"},Vs={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ls={class:"bg-background rounded-lg shadow-xl max-w-4xl w-full max-h-[80vh] overflow-hidden mx-4"},Is={class:"flex justify-between items-center p-4 border-b border-border"},Hs={class:"text-lg font-semibold text-text-light"},Gs={class:"border-b border-border bg-background-mute"},Ks={class:"flex items-center"},qs={key:0,class:"ml-2 text-sm text-blue-600"},Ys={key:0,class:"px-4 pb-4"},Zs={class:"flex items-center space-x-4"},Js={class:"flex-1"},Qs={class:"form-label text-sm flex items-center mb-1"},Xs={class:"flex flex-col"},eo=["disabled"],to={class:"text-xs text-text-muted text-center"},so={key:0,class:"mt-3"},oo={class:"flex flex-wrap gap-1"},lo=["onClick"],no={class:"text-md font-medium text-text-light mb-3 flex items-center"},ro={class:"ml-2 text-sm text-text-muted"},io={class:"grid grid-cols-1 gap-2"},ao=["onClick"],uo=["checked"],co={class:"flex-1 min-w-0"},fo={class:"text-sm font-medium text-text-light"},mo={class:"text-xs text-text-muted"},po={class:"inline-flex items-center mr-2"},xo={key:0,class:"inline-flex items-center mr-2"},vo={key:1,class:"inline-flex items-center"},bo={key:0,class:"text-center py-8"},wo={class:"flex justify-end space-x-3 p-4 border-t border-border bg-background-mute"},go={key:4,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999]"},ho={class:"bg-background rounded-lg shadow-xl max-w-md w-full mx-4"},yo={class:"flex justify-between items-center p-4 border-b border-border"},ko={class:"p-4"},_o={class:"form-label flex items-center mb-2"},Co={class:"flex justify-end space-x-3 p-4 border-t border-border bg-background-mute"},$o=["disabled"],Bo={__name:"BundleManagerComponent",setup(jo){const{success:_,error:w,confirm:Y}=Ve(),W=p([]),Z=p([]),T=p({}),F=p(!1),J=p(!1),S=p(""),C=p([]),g=p(""),j=p(!1),m=p(""),v=p(""),M=p(""),Q=p({top:"0px",left:"0px"}),X=p(!1),P=p(""),A=p(!0),O=p(!0),V=p(!0),L=p(!1),r=p({id:"",name:"",description:"",version:"1.0.0",author:"",website:"",workflows:[],hardware_profiles:{}}),se=N(()=>r.value.workflows?r.value.workflows.filter(o=>!Z.value.includes(o)):[]),oe=N(()=>Z.value.filter(o=>!r.value.workflows.includes(o))),ee=N(()=>{if(!g.value.trim())return T.value;const o=g.value.split(",").map(s=>s.trim().toLowerCase()).filter(s=>s.length>0);if(o.length===0)return T.value;const e={};for(const[s,l]of Object.entries(T.value)){const u=l.filter(f=>{if(!f.tags||f.tags.length===0)return!1;const b=f.tags.map(D=>D.toLowerCase());return o.some(D=>b.some(q=>q.includes(D)))});u.length>0&&(e[s]=u)}return e}),le=N(()=>{const o={};for(const e of Object.values(T.value))for(const s of e)if(s.tags&&s.tags.length>0)for(const l of s.tags)o[l]=(o[l]||0)+1;return Object.entries(o).sort((e,s)=>s[1]-e[1]).slice(0,8).map(([e])=>e)}),ne=N(()=>Object.values(ee.value).reduce((o,e)=>o+e.length,0)),I=async()=>{try{const o=await k.get("/bundles/");W.value=o.data||[]}catch(o){console.error("Error loading bundles:",o),w("Failed to load bundles")}},re=async()=>{try{const o=await k.get("/workflows/");Z.value=o.data||[]}catch(o){console.error("Error loading workflows:",o),w("Failed to load workflows")}},xe=async()=>{var o;try{const e=await k.get("/jsonmodels/");T.value=((o=e.data)==null?void 0:o.groups)||{}}catch(e){console.error("Error loading models:",e),w("Failed to load model groups")}},ve=async()=>{var o,e;try{if(r.value.id){const s={name:r.value.name,description:r.value.description,version:r.value.version,author:r.value.author||null,website:r.value.website||null,workflows:r.value.workflows,hardware_profiles:r.value.hardware_profiles};await k.put(`/bundles/${r.value.id}`,s),_(`Bundle "${r.value.name}" updated successfully`,5e3,!0),await I()}else{const s={name:r.value.name,description:r.value.description,version:r.value.version,author:r.value.author||null,website:r.value.website||null,workflows:r.value.workflows,hardware_profiles:r.value.hardware_profiles};await k.post("/bundles/",s),_(`Bundle "${r.value.name}" created successfully`,5e3,!0),await I(),K()}}catch(s){console.error("Error saving bundle:",s),w("Failed to save bundle: "+(((e=(o=s.response)==null?void 0:o.data)==null?void 0:e.detail)||s.message),8e3,!0)}},be=async o=>{var e,s;try{const l=new FormData;l.append("workflow_file",o),await k.post("/workflows/upload",l,{headers:{"Content-Type":"multipart/form-data"}}),_(`Workflow "${o.name}" uploaded successfully`),await re()}catch(l){console.error("Error uploading workflow:",l),w("Failed to upload workflow: "+(((s=(e=l.response)==null?void 0:e.data)==null?void 0:s.detail)||l.message))}},we=()=>{K(),L.value=!0},ie=()=>{L.value=!1,K()},ge=async o=>{try{if(await Y(`Are you sure you want to remove "${o}" from this bundle?`,"Confirm Removal")){const s=r.value.workflows.indexOf(o);s!==-1&&(r.value.workflows.splice(s,1),_(`Workflow "${o}" removed from bundle`))}}catch(e){w("Failed to remove workflow from bundle: "+e.message)}},he=async o=>{const e=o.target.files[0];e&&(await be(e),o.target.value="")},ye=()=>{document.getElementById("workflow-file").click()},ae=o=>o.dest?o.dest.split("/").pop():o.url?o.url.split("/").pop():"Unknown model",H=o=>{if(!o)return"Unknown size";const e=["B","KB","MB","GB","TB"],s=Math.floor(Math.log(o)/Math.log(1024));return`${(o/Math.pow(1024,s)).toFixed(1)} ${e[s]}`},ke=o=>{var e;S.value=o,C.value=[...((e=r.value.hardware_profiles[o])==null?void 0:e.models)||[]],g.value="",j.value=!1,J.value=!0},te=()=>{J.value=!1,S.value="",C.value=[],g.value="",j.value=!1},_e=()=>{g.value=""},Ce=o=>{const e=g.value.split(",").map(s=>s.trim()).filter(s=>s.length>0);e.includes(o)||(e.push(o),g.value=e.join(", "))},$e=o=>{const e=C.value.findIndex(s=>s.url===o.url&&s.dest===o.dest);e!==-1?C.value.splice(e,1):C.value.push({...o})},Be=o=>C.value.some(e=>e.url===o.url&&e.dest===o.dest),je=()=>{r.value.hardware_profiles[S.value]||(r.value.hardware_profiles[S.value]={description:"",models:[]}),r.value.hardware_profiles[S.value].models=[...C.value],te()},Me=(o,e)=>{var s;(s=r.value.hardware_profiles[o])!=null&&s.models&&r.value.hardware_profiles[o].models.splice(e,1)},de=o=>!o.models||o.models.length===0?0:o.models.reduce((e,s)=>e+(s.size||0),0);Le(async()=>{await Promise.all([I(),re(),xe()]),document.addEventListener("click",o=>{o.target.closest(".relative")||ue(),Fe(o)})});const ue=()=>{F.value=!1,v.value=""},Pe=(o,e)=>{if(v.value===o)v.value="";else{v.value=o;const s=e.target.getBoundingClientRect();Q.value={top:s.bottom+window.scrollY+4+"px",left:s.right-150+"px"}}},Fe=o=>{o.target.closest(".profile-actions-container")||(v.value="")},Se=o=>{M.value=o,P.value=o,v.value="",X.value=!0,He(()=>{const e=document.querySelector('input[ref="renameProfileInput"]');e&&(e.focus(),e.select())})},ce=()=>{if(M.value&&P.value.trim()){const o=P.value.trim();o!==M.value&&Te(M.value,o)}G()},G=()=>{M.value="",P.value="",X.value=!1},De=o=>{const e=r.value.hardware_profiles[o];if(!e)return;let s=`${o} Copy`,l=1;for(;r.value.hardware_profiles[s];)s=`${o} Copy ${l}`,l++;r.value.hardware_profiles[s]={description:e.description,models:[...e.models||[]]},m.value=s,v.value="",_(`Profile "${o}" cloned as "${s}"`)},fe=()=>{let o="New Profile",e=1;for(;r.value.hardware_profiles[o];)o=`New Profile ${e}`,e++;r.value.hardware_profiles[o]={description:"",models:[]},m.value=o,v.value=""},Re=async o=>{try{if(await Y(`Are you sure you want to delete profile "${o}"?`,"Confirm Delete")){if(delete r.value.hardware_profiles[o],m.value===o){const s=Object.keys(r.value.hardware_profiles);m.value=s.length>0?s[0]:""}v.value="",_(`Profile "${o}" deleted successfully`)}}catch(e){w("Failed to delete profile: "+e.message)}},Te=(o,e)=>{const s=e.trim();if(!s||s===o){M.value="";return}if(r.value.hardware_profiles[s]){w(`Profile name "${s}" already exists`);return}const l=r.value.hardware_profiles[o];r.value.hardware_profiles[s]={description:l.description,models:[...l.models||[]]},delete r.value.hardware_profiles[o],m.value=s,v.value="",_(`Profile renamed from "${o}" to "${s}"`)},K=()=>{r.value={id:"",name:"",description:"",version:"1.0.0",author:"",website:"",workflows:[],hardware_profiles:{}},m.value="",v.value="",M.value="",ue()},ze=o=>{r.value.workflows.includes(o)||r.value.workflows.push(o),F.value=!1},Ne=o=>{const e=r.value.workflows.indexOf(o);e!==-1&&r.value.workflows.splice(e,1)},Ue=async o=>{try{const s=(await k.get(`/bundles/${o}`)).data;r.value={id:s.id,name:s.name,description:s.description,version:s.version||"1.0.0",author:s.author||"",website:s.website||"",workflows:s.workflows||[],hardware_profiles:s.hardware_profiles||{}};const l=Object.keys(r.value.hardware_profiles);l.length>0&&(m.value=l[0]),L.value=!0}catch(e){console.error("Error loading bundle for editing:",e),w("Failed to load bundle for editing")}},Ee=async o=>{var e,s;try{const l=W.value.find(b=>b.id===o),u=l?l.name:o;await Y(`Are you sure you want to delete bundle "${u}"?`,"Confirm Deletion")&&(await k.delete(`/bundles/${o}`),_(`Bundle "${u}" deleted successfully`),await I())}catch(l){console.error("Error deleting bundle:",l),w("Failed to delete bundle: "+(((s=(e=l.response)==null?void 0:e.data)==null?void 0:s.detail)||l.message))}},We=async()=>{await ve()},Ae=async(o,e)=>{var s,l;try{const f=(await k.get(`/bundles/${o}`)).data,b=await k.get(`/bundles/export/${o}`,{responseType:"blob"}),D=new Blob([b.data],{type:"application/zip"}),q=window.URL.createObjectURL(D),z=document.createElement("a");z.href=q,z.download=`bundle_${e.replace(/\s+/g,"_")}_v${f.version||"1.0.0"}.zip`,document.body.appendChild(z),z.click(),document.body.removeChild(z),window.URL.revokeObjectURL(q),_(`Bundle "${e}" downloaded successfully`)}catch(u){console.error("Error downloading bundle:",u),w("Failed to download bundle: "+(((l=(s=u.response)==null?void 0:s.data)==null?void 0:l.detail)||u.message))}};return(o,e)=>{const s=Ie("FontAwesomeIcon");return a(),i("div",Ke,[L.value?(a(),i("div",Ct,[n(E,null,{default:U(()=>[t("div",$t,[t("div",Bt,[t("button",{type:"button",class:"btn btn-xs btn-secondary mr-4",onClick:ie,title:"Return to bundle list"},[n(s,{icon:"arrow-left",class:"mr-1"}),e[34]||(e[34]=d("Back "))]),t("h2",jt,[n(s,{icon:"box-open",class:"mr-2"}),r.value.id?(a(),i("span",Mt,"Edit Bundle: "+c(r.value.name),1)):(a(),i("span",Pt,"Create New Bundle"))])]),t("div",Ft,[r.value.id?(a(),i("span",St,[n(s,{icon:"edit",class:"mr-1"}),e[35]||(e[35]=d("Editing "))])):(a(),i("span",Dt,[n(s,{icon:"plus",class:"mr-1"}),e[36]||(e[36]=d("Creating "))]))])])]),_:1}),t("form",{onSubmit:R(We,["prevent"]),class:"space-y-6"},[n(E,null,{default:U(()=>[t("div",{class:"flex justify-between items-center cursor-pointer p-1 -m-1 rounded hover:bg-background-soft transition-colors",onClick:e[0]||(e[0]=l=>A.value=!A.value)},[t("h4",Rt,[n(s,{icon:"info-circle",class:"mr-2"}),e[37]||(e[37]=d("General Information "))]),n(s,{icon:A.value?"chevron-up":"chevron-down",class:"text-text-muted"},null,8,["icon"])]),A.value?(a(),i("div",Tt,[t("div",zt,[t("div",null,[t("label",Nt,[n(s,{icon:"tag",class:"mr-2"}),e[38]||(e[38]=d("Name "))]),$(t("input",{type:"text",class:"form-input w-full","onUpdate:modelValue":e[1]||(e[1]=l=>r.value.name=l),required:""},null,512),[[B,r.value.name]])]),t("div",null,[t("label",Ut,[n(s,{icon:"code-branch",class:"mr-2"}),e[39]||(e[39]=d("Version "))]),$(t("input",{type:"text",class:"form-input w-full","onUpdate:modelValue":e[2]||(e[2]=l=>r.value.version=l),placeholder:"1.0.0",pattern:"^\\d+\\.\\d+\\.\\d+$",title:"Version must be in x.y.z format (e.g., 1.0.0)"},null,512),[[B,r.value.version]])])]),t("div",Et,[t("div",null,[t("label",Wt,[n(s,{icon:"user",class:"mr-2"}),e[40]||(e[40]=d("Author "))]),$(t("input",{type:"text",class:"form-input w-full","onUpdate:modelValue":e[3]||(e[3]=l=>r.value.author=l),placeholder:"Bundle author"},null,512),[[B,r.value.author]])]),t("div",null,[t("label",At,[n(s,{icon:"globe",class:"mr-2"}),e[41]||(e[41]=d("Website "))]),$(t("input",{type:"url",class:"form-input w-full","onUpdate:modelValue":e[4]||(e[4]=l=>r.value.website=l),placeholder:"https://example.com"},null,512),[[B,r.value.website]])])]),t("div",null,[t("label",Ot,[n(s,{icon:"info",class:"mr-2"}),e[42]||(e[42]=d("Description "))]),$(t("textarea",{class:"form-input w-full","onUpdate:modelValue":e[5]||(e[5]=l=>r.value.description=l),rows:"3",placeholder:"Describe your bundle..."},null,512),[[B,r.value.description]])])])):x("",!0)]),_:1}),n(E,null,{default:U(()=>[t("div",{class:"flex justify-between items-center cursor-pointer p-1 -m-1 rounded hover:bg-background-soft transition-colors",onClick:e[6]||(e[6]=l=>O.value=!O.value)},[t("h4",Vt,[n(s,{icon:"sitemap",class:"mr-2"}),e[43]||(e[43]=d("Workflows ")),r.value.workflows.length>0?(a(),i("span",Lt," ("+c(r.value.workflows.length)+" selected) ",1)):x("",!0)]),n(s,{icon:O.value?"chevron-up":"chevron-down",class:"text-text-muted"},null,8,["icon"])]),O.value?(a(),i("div",It,[t("div",Ht,[r.value.workflows.length>0?(a(),i("div",Gt,[(a(!0),i(h,null,y(r.value.workflows,l=>(a(),i("span",{key:l,class:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-600 text-white group"},[n(s,{icon:"file-code",class:"mr-1"}),d(c(l)+" ",1),t("button",{type:"button",class:"ml-2 w-4 h-4 flex items-center justify-center rounded-full bg-blue-500 hover:bg-red-500 text-white text-xs transition-colors duration-200 flex-shrink-0",onClick:R(u=>Ne(l),["stop"]),title:"Remove workflow"},[n(s,{icon:"times"})],8,Kt)]))),128))])):(a(),i("div",qt,[n(s,{icon:"info-circle",class:"mr-1"}),e[44]||(e[44]=d("No workflows selected. Choose from the dropdown below. "))]))]),t("div",Yt,[t("button",{type:"button",class:"form-input w-full text-left flex items-center justify-between",onClick:e[7]||(e[7]=l=>F.value=!F.value)},[t("span",Zt,[n(s,{icon:"plus-circle",class:"mr-2"}),e[45]||(e[45]=d("Add Workflows "))]),n(s,{icon:F.value?"chevron-up":"chevron-down"},null,8,["icon"])]),F.value?(a(),i("div",Jt,[oe.value.length>0?(a(),i("div",Qt,[(a(!0),i(h,null,y(oe.value,l=>(a(),i("div",{key:l,class:"flex items-center px-3 py-2 hover:bg-background-mute cursor-pointer rounded",onClick:u=>ze(l)},[n(s,{icon:"file-code",class:"mr-2 text-blue-600"}),t("span",null,c(l),1)],8,Xt))),128))])):(a(),i("div",es,[n(s,{icon:"info-circle",class:"mr-1"}),e[46]||(e[46]=d("All workflows are already selected "))]))])):x("",!0)]),se.value.length>0?(a(),i("div",ts,[t("div",ss,[n(s,{icon:"exclamation-triangle",class:"mr-1"}),e[47]||(e[47]=t("strong",null,"Missing workflows:",-1)),e[48]||(e[48]=t("span",{class:"ml-1 text-sm"},"These workflows are referenced in this bundle but are not available in the system.",-1))]),t("div",os,[(a(!0),i(h,null,y(se.value,l=>(a(),i("span",{key:l,class:"inline-flex items-center px-2 py-1 rounded text-xs bg-yellow-100 text-yellow-800 group"},[n(s,{icon:"file-code",class:"mr-1"}),d(c(l)+" ",1),t("button",{type:"button",class:"ml-2 w-4 h-4 flex items-center justify-center rounded-full bg-yellow-400 hover:bg-red-500 text-yellow-800 hover:text-white text-xs transition-colors duration-200 flex-shrink-0",onClick:R(u=>ge(l),["stop"]),title:"Remove missing workflow"},[n(s,{icon:"times"})],8,ls)]))),128))])])):x("",!0),t("div",ns,[t("input",{type:"file",class:"form-input flex-1 rounded-r-none",id:"workflow-file",onChange:he,accept:".json"},null,32),t("button",{class:"btn btn-outline rounded-l-none border-l-0",type:"button",onClick:ye},[n(s,{icon:"upload",class:"mr-1"}),e[49]||(e[49]=d("Upload New Workflow "))])])])):x("",!0)]),_:1}),n(E,null,{default:U(()=>{var l;return[t("div",{class:"flex justify-between items-center cursor-pointer p-1 -m-1 rounded hover:bg-background-soft transition-colors",onClick:e[8]||(e[8]=u=>V.value=!V.value)},[t("h4",rs,[n(s,{icon:"server",class:"mr-2"}),e[50]||(e[50]=d("Hardware Profiles & Models ")),Object.keys(r.value.hardware_profiles).length>0?(a(),i("span",is," ("+c(Object.keys(r.value.hardware_profiles).length)+" profiles) ",1)):x("",!0)]),n(s,{icon:V.value?"chevron-up":"chevron-down",class:"text-text-muted"},null,8,["icon"])]),V.value?(a(),i("div",as,[t("div",ds,[t("div",us,[t("div",cs,[(a(!0),i(h,null,y(r.value.hardware_profiles,(u,f)=>(a(),i("div",{key:f,class:"flex-shrink-0 border-r border-border relative"},[t("div",fs,[t("button",{type:"button",class:Ge(["flex-1 px-4 py-3 text-sm font-medium transition-colors flex items-center min-w-0",m.value===f?"bg-background text-text-light border-b-2 border-primary":"text-text-muted hover:text-text-light hover:bg-background-soft"]),onClick:b=>m.value=f},[t("div",ps,[n(s,{icon:"microchip",class:"mr-2 flex-shrink-0"}),t("span",xs,c(f),1),t("span",vs,"("+c(H(de(u)))+")",1)])],10,ms),t("button",{type:"button",class:"ml-2 p-1 text-xs text-text-muted hover:text-text-light hover:bg-background-soft rounded flex-shrink-0 profile-actions-container",onClick:R(b=>Pe(f,b),["stop"]),title:"Profile actions"},[n(s,{icon:"cogs"})],8,bs)])]))),128)),t("button",{type:"button",class:"flex-shrink-0 px-4 py-3 text-sm font-medium text-text-muted hover:text-text-light hover:bg-background-soft transition-colors flex items-center",onClick:fe},[n(s,{icon:"plus",class:"mr-1"})])])]),m.value&&r.value.hardware_profiles[m.value]?(a(),i("div",ws,[t("div",null,[t("label",gs,[n(s,{icon:"info",class:"mr-2"}),e[51]||(e[51]=d("Description "))]),$(t("input",{type:"text",class:"form-input w-full","onUpdate:modelValue":e[9]||(e[9]=u=>r.value.hardware_profiles[m.value].description=u),placeholder:"Profile description"},null,512),[[B,r.value.hardware_profiles[m.value].description]])]),t("div",hs,[t("div",ys,[t("div",ks,[n(s,{icon:"cubes",class:"mr-2 text-primary"}),e[52]||(e[52]=t("span",{class:"text-text-muted"},"Models:",-1)),t("span",_s,c(((l=r.value.hardware_profiles[m.value].models)==null?void 0:l.length)||0),1)]),t("div",Cs,[n(s,{icon:"database",class:"mr-2 text-primary"}),e[53]||(e[53]=t("span",{class:"text-text-muted"},"Total Size:",-1)),t("span",$s,c(H(de(r.value.hardware_profiles[m.value]))),1)])])]),t("div",null,[t("div",Bs,[t("label",js,[n(s,{icon:"cubes",class:"mr-2"}),e[54]||(e[54]=d("Models for this Profile "))]),t("button",{type:"button",class:"btn btn-sm btn-outline",onClick:e[10]||(e[10]=u=>ke(m.value))},[n(s,{icon:"plus-circle",class:"mr-1"}),e[55]||(e[55]=d("Add Models "))])]),t("div",Ms,[r.value.hardware_profiles[m.value].models&&r.value.hardware_profiles[m.value].models.length>0?(a(),i("div",Ps,[(a(!0),i(h,null,y(r.value.hardware_profiles[m.value].models,(u,f)=>(a(),i("div",{key:f,class:"flex items-center justify-between p-2 bg-background rounded border"},[t("div",Fs,[t("div",Ss,c(ae(u)),1),t("div",Ds,[t("span",Rs,[n(s,{icon:"tag",class:"mr-1"}),d(c(u.type),1)]),u.tags&&u.tags.length>0?(a(),i("span",Ts,[n(s,{icon:"tags",class:"mr-1"}),d(c(u.tags.join(", ")),1)])):x("",!0),u.size?(a(),i("span",zs,[n(s,{icon:"database",class:"mr-1"}),d(c(H(u.size)),1)])):x("",!0)])]),t("button",{type:"button",class:"ml-2 text-red-600 hover:text-red-800",onClick:b=>Me(m.value,f),title:"Remove model"},[n(s,{icon:"trash-alt"})],8,Ns)]))),128))])):(a(),i("div",Us,[n(s,{icon:"info-circle",class:"mr-1"}),e[56]||(e[56]=d("No models selected for this profile. "))]))])])])):x("",!0),Object.keys(r.value.hardware_profiles).length===0?(a(),i("div",Es,[n(s,{icon:"server",class:"text-4xl text-text-muted mb-4"}),e[58]||(e[58]=t("h4",{class:"text-lg font-medium text-text-light mb-2"},"No Hardware Profiles",-1)),e[59]||(e[59]=t("p",{class:"text-text-muted mb-4"},"Create your first hardware profile to start adding models.",-1)),t("button",{type:"button",class:"btn btn-primary",onClick:fe},[n(s,{icon:"plus-circle",class:"mr-1"}),e[57]||(e[57]=d("Create First Profile "))])])):x("",!0)])])):x("",!0)]}),_:1}),n(E,null,{default:U(()=>[t("div",Ws,[t("button",{type:"button",class:"btn btn-secondary",onClick:ie},[n(s,{icon:"arrow-left",class:"mr-1"}),e[60]||(e[60]=d("Back "))]),t("div",As,[t("button",{type:"button",class:"btn btn-outline",onClick:K},[n(s,{icon:"undo",class:"mr-1"}),e[61]||(e[61]=d("Reset Form "))]),t("button",Os,[n(s,{icon:r.value.id?"save":"plus",class:"mr-1"},null,8,["icon"]),d(" "+c(r.value.id?"Update":"Create")+" Bundle ",1)])])])]),_:1})],32)])):(a(),i("div",qe,[e[33]||(e[33]=t("h2",{class:"text-xl font-semibold text-text-light mb-4"},"Bundle Manager",-1)),t("div",Ye,[t("h4",Ze,[n(s,{icon:"box-open",class:"mr-2"}),e[19]||(e[19]=d("Model Bundles "))]),t("p",Je,[n(s,{icon:"info-circle",class:"mr-2"}),e[20]||(e[20]=d("Create predefined bundles of models with associated workflows. "))]),Object.keys(W.value).length>0?(a(),i("div",Qe,[t("table",Xe,[t("thead",et,[t("tr",null,[t("th",tt,[n(s,{icon:"tag",class:"mr-1"}),e[21]||(e[21]=d("Name "))]),t("th",st,[n(s,{icon:"code-branch",class:"mr-1"}),e[22]||(e[22]=d("Version "))]),t("th",ot,[n(s,{icon:"user",class:"mr-1"}),e[23]||(e[23]=d("Author "))]),t("th",lt,[n(s,{icon:"info",class:"mr-1"}),e[24]||(e[24]=d("Description "))]),t("th",nt,[n(s,{icon:"sitemap",class:"mr-1"}),e[25]||(e[25]=d("Workflows "))]),t("th",rt,[n(s,{icon:"server",class:"mr-1"}),e[26]||(e[26]=d("Hardware Profiles "))]),t("th",it,[n(s,{icon:"cogs",class:"mr-1"}),e[27]||(e[27]=d("Actions "))])])]),t("tbody",at,[(a(!0),i(h,null,y(W.value,l=>(a(),i("tr",{key:l.id,class:"hover:bg-background-mute"},[t("td",dt,c(l.name),1),t("td",ut,c(l.version||"1.0.0"),1),t("td",ct,c(l.author||"N/A"),1),t("td",ft,c(l.description),1),t("td",mt,[t("div",pt,[(a(!0),i(h,null,y(l.workflows||[],u=>(a(),i("span",{key:u,class:"inline-flex items-center px-2 py-1 rounded text-xs bg-blue-600 text-white"},[n(s,{icon:"file-code",class:"mr-1"}),d(c(u),1)]))),128))])]),t("td",xt,[t("div",vt,[(a(!0),i(h,null,y(l.hardware_profiles||{},(u,f)=>{var b;return a(),i("span",{key:f,class:"inline-flex items-center px-2 py-1 rounded text-xs bg-gray-600 text-white"},[n(s,{icon:"microchip",class:"mr-1"}),d(c(f)+" ("+c(((b=u.models)==null?void 0:b.length)||0)+" models) ",1)])}),128))])]),t("td",bt,[t("div",wt,[t("button",{class:"px-3 py-1 text-xs bg-btn-default text-white rounded hover:bg-btn-default-hover transition-colors",onClick:u=>Ue(l.id)},[n(s,{icon:"edit",class:"mr-1"}),e[28]||(e[28]=d("Edit "))],8,gt),t("button",{class:"px-3 py-1 text-xs bg-green-600 text-white rounded hover:bg-green-700 transition-colors",onClick:u=>Ae(l.id,l.name),title:"Download bundle as ZIP"},[n(s,{icon:"download",class:"mr-1"}),e[29]||(e[29]=d("Download "))],8,ht),t("button",{class:"px-3 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700 transition-colors",onClick:u=>Ee(l.id)},[n(s,{icon:"trash-alt",class:"mr-1"}),e[30]||(e[30]=d("Delete "))],8,yt)])])]))),128))])])])):(a(),i("div",kt,[n(s,{icon:"info-circle",class:"mr-2 mt-0.5"}),e[31]||(e[31]=t("span",null,"No bundles available. Create your first bundle below.",-1))])),t("div",_t,[t("button",{type:"button",class:"btn btn-primary",onClick:we},[n(s,{icon:"plus-circle",class:"mr-1"}),e[32]||(e[32]=d("New Bundle "))])])])])),v.value?(a(),i("div",{key:2,class:"fixed bg-background border border-border rounded shadow-lg z-[9999] min-w-[150px] profile-actions-container",style:me({top:Q.value.top,left:Q.value.left}),onClick:e[14]||(e[14]=R(()=>{},["stop"]))},[t("button",{type:"button",class:"w-full px-3 py-2 text-left text-sm text-text-light hover:bg-background-soft flex items-center",onClick:e[11]||(e[11]=l=>Se(v.value))},[n(s,{icon:"edit",class:"mr-2"}),e[62]||(e[62]=d("Rename "))]),t("button",{type:"button",class:"w-full px-3 py-2 text-left text-sm text-text-light hover:bg-background-soft flex items-center",onClick:e[12]||(e[12]=l=>De(v.value))},[n(s,{icon:"copy",class:"mr-2"}),e[63]||(e[63]=d("Clone "))]),t("button",{type:"button",class:"w-full px-3 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center",onClick:e[13]||(e[13]=l=>Re(v.value))},[n(s,{icon:"trash-alt",class:"mr-2"}),e[64]||(e[64]=d("Delete "))])],4)):x("",!0),J.value?(a(),i("div",Vs,[t("div",Ls,[t("div",Is,[t("h3",Hs,"Select Models for "+c(S.value),1),t("button",{type:"button",class:"text-text-muted hover:text-text-light",onClick:te},[n(s,{icon:"times",class:"text-xl"})])]),t("div",Gs,[t("button",{type:"button",class:"w-full px-4 py-3 flex items-center justify-between hover:bg-background transition-colors",onClick:e[15]||(e[15]=l=>j.value=!j.value)},[t("div",Ks,[n(s,{icon:"filter",class:"mr-2"}),e[65]||(e[65]=t("span",{class:"font-medium text-text-light"},"Filter Models",-1)),g.value?(a(),i("span",qs,"("+c(ne.value)+" models)",1)):x("",!0)]),n(s,{icon:j.value?"chevron-up":"chevron-down",class:"text-text-muted"},null,8,["icon"])]),j.value?(a(),i("div",Ys,[t("div",Zs,[t("div",Js,[t("label",Qs,[n(s,{icon:"search",class:"mr-2"}),e[66]||(e[66]=d("Filter by Tags "))]),$(t("input",{type:"text",class:"form-input w-full text-sm","onUpdate:modelValue":e[16]||(e[16]=l=>g.value=l),placeholder:"Enter tags to filter models (e.g., base, fp8, nsfw...)"},null,512),[[B,g.value]]),e[67]||(e[67]=t("p",{class:"text-xs text-text-muted mt-1"}," Separate multiple tags with commas. Models matching any of these tags will be shown. ",-1))]),t("div",Xs,[t("button",{type:"button",class:"btn btn-sm btn-outline mb-2",onClick:_e,disabled:!g.value},[n(s,{icon:"times",class:"mr-1"}),e[68]||(e[68]=d("Clear "))],8,eo),t("div",to,c(ne.value)+" models ",1)])]),le.value.length>0?(a(),i("div",so,[e[69]||(e[69]=t("label",{class:"text-xs text-text-muted mb-2 block"},"Popular tags:",-1)),t("div",oo,[(a(!0),i(h,null,y(le.value,l=>(a(),i("button",{key:l,type:"button",class:"px-2 py-1 text-xs rounded bg-gray-200 hover:bg-gray-300 text-gray-700 transition-colors",onClick:u=>Ce(l)},c(l),9,lo))),128))])])):x("",!0)])):x("",!0)]),t("div",{class:"p-4 overflow-y-auto",style:me({"max-height":j.value?"45vh":"55vh"})},[(a(!0),i(h,null,y(ee.value,(l,u)=>(a(),i("div",{key:u,class:"mb-6"},[t("h4",no,[n(s,{icon:"folder",class:"mr-2"}),d(c(u)+" ",1),t("span",ro,"("+c(l.length)+" models)",1)]),t("div",io,[(a(!0),i(h,null,y(l,(f,b)=>(a(),i("div",{key:b,class:"flex items-center p-3 border border-border rounded hover:bg-background-mute cursor-pointer",onClick:D=>$e(f)},[t("input",{type:"checkbox",checked:Be(f),class:"mr-3",onClick:e[17]||(e[17]=R(()=>{},["stop"]))},null,8,uo),t("div",co,[t("div",fo,c(ae(f)),1),t("div",mo,[t("span",po,[n(s,{icon:"tag",class:"mr-1"}),d(c(f.type),1)]),f.tags&&f.tags.length>0?(a(),i("span",xo,[n(s,{icon:"tags",class:"mr-1"}),d(c(f.tags.join(", ")),1)])):x("",!0),f.size?(a(),i("span",vo,[n(s,{icon:"database",class:"mr-1"}),d(c(H(f.size)),1)])):x("",!0)])])],8,ao))),128))])]))),128)),Object.keys(ee.value).length===0?(a(),i("div",bo,[n(s,{icon:"search",class:"text-4xl text-text-muted mb-4"}),e[70]||(e[70]=t("h4",{class:"text-lg font-medium text-text-light mb-2"},"No models found",-1)),e[71]||(e[71]=t("p",{class:"text-text-muted"}," No models match the current filter criteria. Try adjusting your tag filters. ",-1))])):x("",!0)],4),t("div",wo,[t("button",{type:"button",class:"btn btn-secondary",onClick:te}," Cancel "),t("button",{type:"button",class:"btn btn-primary",onClick:je}," Apply Selection ("+c(C.value.length)+" selected) ",1)])])])):x("",!0),X.value?(a(),i("div",go,[t("div",ho,[t("div",yo,[e[72]||(e[72]=t("h3",{class:"text-lg font-semibold text-text-light"},"Rename Profile",-1)),t("button",{type:"button",class:"text-text-muted hover:text-text-light",onClick:G},[n(s,{icon:"times",class:"text-xl"})])]),t("div",ko,[t("label",_o,[n(s,{icon:"tag",class:"mr-2"}),e[73]||(e[73]=d("Profile Name "))]),$(t("input",{ref:"renameProfileInput",type:"text",class:"form-input w-full","onUpdate:modelValue":e[18]||(e[18]=l=>P.value=l),onKeyup:[pe(ce,["enter"]),pe(G,["escape"])],placeholder:"Enter new profile name"},null,544),[[B,P.value]])]),t("div",Co,[t("button",{type:"button",class:"btn btn-secondary",onClick:G}," Cancel "),t("button",{type:"button",class:"btn btn-primary",onClick:ce,disabled:!P.value.trim()},[n(s,{icon:"save",class:"mr-1"}),e[74]||(e[74]=d("Rename "))],8,$o)])])])):x("",!0)])}}},So=Oe(Bo,[["__scopeId","data-v-5842ea33"]]);export{So as default};
