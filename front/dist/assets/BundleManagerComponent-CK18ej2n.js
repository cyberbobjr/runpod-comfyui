import{R as We,s as k,_ as Le,p as Oe,e as b,f as A,g as Ve,c as d,a as h,b as t,j as i,d as c,S as He,D as B,E as C,w as N,U,k as pe,t as p,A as $,B as E,V as xe,W as Ge,o as u,n as Ke}from"./index--V_irXaw.js";import{_ as W}from"./CommonCard-C0mcH2Uw.js";const qe=We("bundles",{state:()=>({bundles:[],installedBundles:[],loading:!1,installedLoading:!1,error:null,installedError:null,selectedBundles:[],installProgress:{},bundleCategories:[]}),getters:{bundlesByCategory:r=>{const o={};return r.bundles.forEach(f=>{const g=f.category||"Uncategorized";o[g]||(o[g]=[]),o[g].push(f)}),o},availableCategories:r=>{const o=new Set;return r.bundles.forEach(f=>{o.add(f.category||"Uncategorized")}),[...o]},installedBundleIds:r=>new Set(r.installedBundles.map(o=>o.id)),isBundleInstalled:r=>o=>r.installedBundles.some(f=>f.id===o),isBundleSelected:r=>o=>r.selectedBundles.some(f=>f.id===o),getInstallProgress:r=>o=>r.installProgress[o]||null,updatableBundles:r=>r.installedBundles.filter(o=>{const f=r.bundles.find(g=>g.id===o.id);return f&&f.version!==o.version}),selectedBundlesCount:r=>r.selectedBundles.length,totalBundlesCount:r=>r.bundles.length,installedBundlesCount:r=>r.installedBundles.length,isLoading:r=>r.loading||r.installedLoading},actions:{async deleteBundle(r){try{await k.delete(`/bundles/${r}`),await this.fetchBundles()}catch(o){throw console.error("Error deleting bundle:",o),o}},async fetchBundles(){this.loading=!0,this.error=null;try{const r=await k.get("/bundles");this.bundles=r.data}catch(r){throw this.error=r.message,console.error("Error fetching bundles:",r),r}finally{this.loading=!1}},async fetchInstalledBundles(){this.installedLoading=!0,this.installedError=null;try{const r=await k.get("/bundles/installed");this.installedBundles=r.data}catch(r){throw this.installedError=r.message,console.error("Error fetching installed bundles:",r),r}finally{this.installedLoading=!1}},async installBundle(r){try{this.installProgress[r.id]={progress:0,status:"starting",error:null};const o=await k.post("/bundles/install",{bundle:r});return this.installProgress[r.id]={progress:100,status:"completed",error:null},await this.fetchInstalledBundles(),o.data}catch(o){throw this.installProgress[r.id]={progress:0,status:"error",error:o.message},console.error("Error installing bundle:",o),o}},async uninstallBundle(r){try{const o=await k.delete(`/bundles/uninstall/${r.id}`);return await this.fetchInstalledBundles(),this.deselectBundles([r]),o.data}catch(o){throw console.error("Error uninstalling bundle:",o),o}},updateInstallProgress(r,o,f="installing"){this.installProgress[r]={progress:o,status:f,error:null}},async cancelInstallation(r){try{await k.post(`/bundles/install/${r}/cancel`),delete this.installProgress[r]}catch(o){throw console.error("Error canceling installation:",o),o}},async updateBundle(r){try{const o=await k.post(`/bundles/update/${r.id}`);return await this.fetchInstalledBundles(),o.data}catch(o){throw console.error("Error updating bundle:",o),o}},toggleBundleSelection(r){const o=this.selectedBundles.findIndex(f=>f.id===r.id);o>-1?this.selectedBundles.splice(o,1):this.selectedBundles.push(r)},selectBundles(r){r.forEach(o=>{this.isBundleSelected(o.id)||this.selectedBundles.push(o)})},deselectBundles(r){r.forEach(o=>{const f=this.selectedBundles.findIndex(g=>g.id===o.id);f>-1&&this.selectedBundles.splice(f,1)})},selectAllBundles(){this.selectedBundles=[...this.bundles]},clearSelectedBundles(){this.selectedBundles=[]},selectBundlesByCategory(r){const o=this.bundles.filter(f=>(f.category||"Uncategorized")===r);this.selectBundles(o)},async installSelectedBundles(){const r=this.selectedBundles.map(o=>this.installBundle(o));try{await Promise.all(r),this.clearSelectedBundles()}catch(o){throw console.error("Error installing selected bundles:",o),o}},async updateAllBundles(){const r=this.updatableBundles.map(o=>this.updateBundle(o));try{await Promise.all(r)}catch(o){throw console.error("Error updating bundles:",o),o}},getBundleById(r){return this.bundles.find(o=>o.id===r)||null},getInstalledBundleById(r){return this.installedBundles.find(o=>o.id===r)||null},searchBundles(r){if(!r)return this.bundles;const o=r.toLowerCase();return this.bundles.filter(f=>f.name&&f.name.toLowerCase().includes(o)||f.description&&f.description.toLowerCase().includes(o)||f.author&&f.author.toLowerCase().includes(o))},filterBundles(r){let o=this.bundles;if(r.category&&(o=o.filter(f=>(f.category||"Uncategorized")===r.category)),r.installed!==void 0&&(o=o.filter(f=>this.isBundleInstalled(f.id)===r.installed)),r.updatable){const f=new Set(this.updatableBundles.map(g=>g.id));o=o.filter(g=>f.has(g.id))}return o},async refreshBundles(){await Promise.all([this.fetchBundles(),this.fetchInstalledBundles()])},clearBundles(){this.bundles=[],this.installedBundles=[],this.selectedBundles=[],this.installProgress={},this.error=null,this.installedError=null},setError(r){this.error=r},setInstalledError(r){this.installedError=r},clearErrors(){this.error=null,this.installedError=null}}}),Qe={class:"space-y-6 p-4 bg-background"},Ye={key:0,class:"card"},Ze={class:"mb-6"},Je={class:"text-lg font-medium text-text-light mb-2 flex items-center"},Xe={class:"text-text-muted mb-4 flex items-center"},et={key:0,class:"overflow-x-auto"},tt={class:"min-w-full divide-y divide-border"},st={class:"bg-background-mute"},lt={class:"px-4 py-3 text-left text-xs font-medium text-text-light uppercase tracking-wider"},ot={class:"px-4 py-3 text-left text-xs font-medium text-text-light uppercase tracking-wider"},nt={class:"px-4 py-3 text-left text-xs font-medium text-text-light uppercase tracking-wider"},rt={class:"px-4 py-3 text-left text-xs font-medium text-text-light uppercase tracking-wider"},it={class:"px-4 py-3 text-left text-xs font-medium text-text-light uppercase tracking-wider"},at={class:"px-4 py-3 text-left text-xs font-medium text-text-light uppercase tracking-wider"},dt={class:"px-4 py-3 text-left text-xs font-medium text-text-light uppercase tracking-wider"},ut={class:"bg-background-soft divide-y divide-border"},ct={class:"px-4 py-3 text-text-light"},ft={class:"px-4 py-3 text-text-light"},mt={class:"px-4 py-3 text-text-light"},pt={class:"px-4 py-3 text-text-light"},xt={class:"px-4 py-3"},vt={class:"flex flex-wrap gap-1"},bt={class:"px-4 py-3"},ht={class:"flex flex-wrap gap-1"},gt={class:"px-4 py-3"},wt={class:"flex space-x-1"},yt=["onClick"],kt=["onClick"],_t=["onClick"],Bt={key:1,class:"bg-blue-50 border border-blue-200 text-blue-700 px-4 py-3 rounded flex items-start"},Ct={class:"mt-4 flex justify-end"},Pt={key:1,class:"space-y-6"},$t={class:"flex items-center justify-between"},Et={class:"flex items-center"},jt={class:"text-xl font-semibold text-text-light"},Mt={key:0},St={key:1},Ft={class:"flex items-center space-x-2"},It={key:0,class:"text-sm text-blue-600 flex items-center"},zt={key:1,class:"text-sm text-green-600 flex items-center"},Ut={class:"text-lg font-medium text-text-light flex items-center"},Dt={key:0,class:"mt-4 space-y-4"},Rt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Tt={class:"form-label flex items-center"},At={class:"form-label flex items-center"},Nt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Wt={class:"form-label flex items-center"},Lt={class:"form-label flex items-center"},Ot={class:"form-label flex items-center"},Vt={class:"text-lg font-medium text-text-light flex items-center"},Ht={key:0,class:"ml-2 text-sm text-blue-600"},Gt={key:0,class:"mt-4 space-y-4"},Kt={class:"bg-background-soft border border-border rounded-lg p-3 min-h-[60px]"},qt={key:0,class:"flex flex-wrap gap-2"},Qt=["onClick"],Yt={key:1,class:"text-text-muted text-sm flex items-center"},Zt={class:"relative"},Jt={class:"flex items-center"},Xt={key:0,class:"absolute z-10 w-full mt-1 bg-background-soft border border-border rounded-lg shadow-lg max-h-60 overflow-y-auto"},es={key:0,class:"p-2"},ts=["onClick"],ss={key:1,class:"p-4 text-text-muted text-center"},ls={key:0,class:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg"},os={class:"text-yellow-600 mb-2 flex items-center"},ns={class:"flex flex-wrap gap-2"},rs=["onClick"],is={class:"flex"},as={class:"text-lg font-medium text-text-light flex items-center"},ds={key:0,class:"ml-2 text-sm text-green-600"},us={key:0,class:"mt-4"},cs={class:"border border-border rounded-lg overflow-hidden"},fs={class:"bg-background-mute border-b border-border"},ms={class:"flex overflow-x-auto"},ps={class:"flex items-center"},xs=["onClick"],vs={class:"flex items-center min-w-0 mr-2"},bs={class:"truncate"},hs={class:"ml-1 text-xs opacity-75 flex-shrink-0"},gs=["onClick"],ws={key:0,class:"p-4 space-y-4"},ys={class:"form-label flex items-center"},ks={class:"bg-background-soft border border-border rounded-lg p-3"},_s={class:"grid grid-cols-2 gap-4 text-sm"},Bs={class:"flex items-center"},Cs={class:"ml-1 font-medium text-text-light"},Ps={class:"flex items-center"},$s={class:"ml-1 font-medium text-text-light"},Es={class:"flex justify-between items-center mb-2"},js={class:"form-label flex items-center mb-0"},Ms={class:"bg-background-soft border border-border rounded-lg p-3 min-h-[60px] mb-2"},Ss={key:0,class:"space-y-2"},Fs={class:"flex-1 min-w-0"},Is={class:"text-sm font-medium text-text-light truncate"},zs={class:"text-xs text-text-muted"},Us={class:"inline-flex items-center mr-2"},Ds={key:0,class:"inline-flex items-center mr-2"},Rs={key:1,class:"inline-flex items-center"},Ts=["onClick"],As={key:1,class:"text-text-muted text-sm flex items-center"},Ns={key:1,class:"p-8 text-center"},Ws={class:"flex justify-between items-center"},Ls={class:"flex space-x-3"},Os={type:"submit",class:"btn btn-primary"},Vs={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Hs={class:"bg-background rounded-lg shadow-xl max-w-4xl w-full max-h-[80vh] overflow-hidden mx-4"},Gs={class:"flex justify-between items-center p-4 border-b border-border"},Ks={class:"text-lg font-semibold text-text-light"},qs={class:"border-b border-border bg-background-mute"},Qs={class:"flex items-center"},Ys={key:0,class:"ml-2 text-sm text-blue-600"},Zs={key:0,class:"px-4 pb-4"},Js={class:"flex items-center space-x-4"},Xs={class:"flex-1"},el={class:"form-label text-sm flex items-center mb-1"},tl={class:"flex flex-col"},sl=["disabled"],ll={class:"text-xs text-text-muted text-center"},ol={key:0,class:"mt-3"},nl={class:"flex flex-wrap gap-1"},rl=["onClick"],il={class:"text-md font-medium text-text-light mb-3 flex items-center"},al={class:"ml-2 text-sm text-text-muted"},dl={class:"grid grid-cols-1 gap-2"},ul=["onClick"],cl=["checked"],fl={class:"flex-1 min-w-0"},ml={class:"text-sm font-medium text-text-light"},pl={class:"text-xs text-text-muted"},xl={class:"inline-flex items-center mr-2"},vl={key:0,class:"inline-flex items-center mr-2"},bl={key:1,class:"inline-flex items-center"},hl={key:0,class:"text-center py-8"},gl={class:"flex justify-end space-x-3 p-4 border-t border-border bg-background-mute"},wl={key:4,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999]"},yl={class:"bg-background rounded-lg shadow-xl max-w-md w-full mx-4"},kl={class:"flex justify-between items-center p-4 border-b border-border"},_l={class:"p-4"},Bl={class:"form-label flex items-center mb-2"},Cl={class:"flex justify-end space-x-3 p-4 border-t border-border bg-background-mute"},Pl=["disabled"],$l={__name:"BundleManagerComponent",setup(r){const{success:o,error:f,confirm:g}=Oe(),D=qe(),Y=b([]),Z=b([]),R=b({}),F=b(!1),J=b(!1),I=b(""),P=b([]),_=b(""),j=b(!1),v=b(""),w=b(""),M=b(""),X=b({top:"0px",left:"0px"}),ee=b(!1),S=b(""),L=b(!0),O=b(!0),V=b(!0),H=b(!1),a=b({id:"",name:"",description:"",version:"1.0.0",author:"",website:"",workflows:[],hardware_profiles:{}}),le=A(()=>a.value.workflows?a.value.workflows.filter(l=>!Z.value.includes(l)):[]),oe=A(()=>Z.value.filter(l=>!a.value.workflows.includes(l))),te=A(()=>{if(!_.value.trim())return R.value;const l=_.value.split(",").map(s=>s.trim().toLowerCase()).filter(s=>s.length>0);if(l.length===0)return R.value;const e={};for(const[s,n]of Object.entries(R.value)){const m=n.filter(x=>{if(!x.tags||x.tags.length===0)return!1;const y=x.tags.map(z=>z.toLowerCase());return l.some(z=>y.some(Q=>Q.includes(z)))});m.length>0&&(e[s]=m)}return e}),ne=A(()=>{const l={};for(const e of Object.values(R.value))for(const s of e)if(s.tags&&s.tags.length>0)for(const n of s.tags)l[n]=(l[n]||0)+1;return Object.entries(l).sort((e,s)=>s[1]-e[1]).slice(0,8).map(([e])=>e)}),re=A(()=>Object.values(te.value).reduce((l,e)=>l+e.length,0)),ie=async()=>{try{const l=await k.get("/workflows/");Z.value=l.data||[]}catch(l){console.error("Error loading workflows:",l),f("Failed to load workflows")}},ve=async()=>{var l;try{const e=await k.get("/jsonmodels/");R.value=((l=e.data)==null?void 0:l.groups)||{}}catch(e){console.error("Error loading models:",e),f("Failed to load model groups")}},be=async l=>{var e,s;try{const n=new FormData;n.append("workflow_file",l),await k.post("/workflows/upload",n,{headers:{"Content-Type":"multipart/form-data"}}),o(`Workflow "${l.name}" uploaded successfully`),await ie()}catch(n){console.error("Error uploading workflow:",n),f("Failed to upload workflow: "+(((s=(e=n.response)==null?void 0:e.data)==null?void 0:s.detail)||n.message))}},he=()=>{q(),H.value=!0},ae=()=>{H.value=!1,q()},ge=async l=>{try{if(await g(`Are you sure you want to remove "${l}" from this bundle?`,"Confirm Removal")){const s=a.value.workflows.indexOf(l);s!==-1&&(a.value.workflows.splice(s,1),o(`Workflow "${l}" removed from bundle`))}}catch(e){f("Failed to remove workflow from bundle: "+e.message)}},we=async l=>{const e=l.target.files[0];e&&(await be(e),l.target.value="")},ye=()=>{document.getElementById("workflow-file").click()},de=l=>l.dest?l.dest.split("/").pop():l.url?l.url.split("/").pop():"Unknown model",G=l=>{if(!l)return"Unknown size";const e=["B","KB","MB","GB","TB"],s=Math.floor(Math.log(l)/Math.log(1024));return`${(l/Math.pow(1024,s)).toFixed(1)} ${e[s]}`},ke=l=>{var e;I.value=l,P.value=[...((e=a.value.hardware_profiles[l])==null?void 0:e.models)||[]],_.value="",j.value=!1,J.value=!0},se=()=>{J.value=!1,I.value="",P.value=[],_.value="",j.value=!1},_e=()=>{_.value=""},Be=l=>{const e=_.value.split(",").map(s=>s.trim()).filter(s=>s.length>0);e.includes(l)||(e.push(l),_.value=e.join(", "))},Ce=l=>{const e=P.value.findIndex(s=>s.url===l.url&&s.dest===l.dest);e!==-1?P.value.splice(e,1):P.value.push({...l})},Pe=l=>P.value.some(e=>e.url===l.url&&e.dest===l.dest),$e=()=>{a.value.hardware_profiles[I.value]||(a.value.hardware_profiles[I.value]={description:"",models:[]}),a.value.hardware_profiles[I.value].models=[...P.value],se()},Ee=(l,e)=>{var s;(s=a.value.hardware_profiles[l])!=null&&s.models&&a.value.hardware_profiles[l].models.splice(e,1)},ue=l=>!l.models||l.models.length===0?0:l.models.reduce((e,s)=>e+(s.size||0),0);Ve(async()=>{await Promise.all([D.fetchBundles(),ie(),ve()]),document.addEventListener("click",l=>{l.target.closest(".relative")||ce(),Me(l)})});const ce=()=>{F.value=!1,w.value=""},je=(l,e)=>{if(w.value===l)w.value="";else{w.value=l;const s=e.target.getBoundingClientRect();X.value={top:s.bottom+window.scrollY+4+"px",left:s.right-150+"px"}}},Me=l=>{l.target.closest(".profile-actions-container")||(w.value="")},Se=l=>{M.value=l,S.value=l,w.value="",ee.value=!0,Ge(()=>{const e=document.querySelector('input[ref="renameProfileInput"]');e&&(e.focus(),e.select())})},fe=()=>{if(M.value&&S.value.trim()){const l=S.value.trim();l!==M.value&&ze(M.value,l)}K()},K=()=>{M.value="",S.value="",ee.value=!1},Fe=l=>{const e=a.value.hardware_profiles[l];if(!e)return;let s=`${l} Copy`,n=1;for(;a.value.hardware_profiles[s];)s=`${l} Copy ${n}`,n++;a.value.hardware_profiles[s]={description:e.description,models:[...e.models||[]]},v.value=s,w.value="",o(`Profile "${l}" cloned as "${s}"`)},me=()=>{let l="New Profile",e=1;for(;a.value.hardware_profiles[l];)l=`New Profile ${e}`,e++;a.value.hardware_profiles[l]={description:"",models:[]},v.value=l,w.value=""},Ie=async l=>{try{if(await g(`Are you sure you want to delete profile "${l}"?`,"Confirm Delete")){if(delete a.value.hardware_profiles[l],v.value===l){const s=Object.keys(a.value.hardware_profiles);v.value=s.length>0?s[0]:""}w.value="",o(`Profile "${l}" deleted successfully`)}}catch(e){f("Failed to delete profile: "+e.message)}},ze=(l,e)=>{const s=e.trim();if(!s||s===l){M.value="";return}if(a.value.hardware_profiles[s]){f(`Profile name "${s}" already exists`);return}const n=a.value.hardware_profiles[l];a.value.hardware_profiles[s]={description:n.description,models:[...n.models||[]]},delete a.value.hardware_profiles[l],v.value=s,w.value="",o(`Profile renamed from "${l}" to "${s}"`)},q=()=>{a.value={id:"",name:"",description:"",version:"1.0.0",author:"",website:"",workflows:[],hardware_profiles:{}},v.value="",w.value="",M.value="",ce()},Ue=l=>{a.value.workflows.includes(l)||a.value.workflows.push(l),F.value=!1},De=l=>{const e=a.value.workflows.indexOf(l);e!==-1&&a.value.workflows.splice(e,1)},Re=async l=>{try{const s=(await k.get(`/bundles/${l}`)).data;a.value={id:s.id,name:s.name,description:s.description,version:s.version||"1.0.0",author:s.author||"",website:s.website||"",workflows:s.workflows||[],hardware_profiles:s.hardware_profiles||{}};const n=Object.keys(a.value.hardware_profiles);n.length>0&&(v.value=n[0]),H.value=!0}catch(e){console.error("Error loading bundle for editing:",e),f("Failed to load bundle for editing")}},Te=async l=>{var e,s;try{const n=Y.value.find(y=>y.id===l),m=n?n.name:l;await g(`Are you sure you want to delete bundle "${m}"?`,"Confirm Deletion")&&(await D.deleteBundle(l),o(`Bundle "${m}" deleted successfully`))}catch(n){console.error("Error deleting bundle:",n),f("Failed to delete bundle: "+(((s=(e=n.response)==null?void 0:e.data)==null?void 0:s.detail)||n.message))}},Ae=async()=>{var l,e;try{if(a.value.id){const s={name:a.value.name,description:a.value.description,version:a.value.version,author:a.value.author||null,website:a.value.website||null,workflows:a.value.workflows,hardware_profiles:a.value.hardware_profiles};await k.put(`/bundles/${a.value.id}`,s),o(`Bundle "${a.value.name}" updated successfully`,5e3,!0),await D.fetchBundles()}else{const s={name:a.value.name,description:a.value.description,version:a.value.version,author:a.value.author||null,website:a.value.website||null,workflows:a.value.workflows,hardware_profiles:a.value.hardware_profiles};await D.updateBundle(s),o(`Bundle "${a.value.name}" created successfully`,5e3,!0),await D.fetchBundles(),q()}}catch(s){console.error("Error saving bundle:",s),f("Failed to save bundle: "+(((e=(l=s.response)==null?void 0:l.data)==null?void 0:e.detail)||s.message),8e3,!0)}},Ne=async(l,e)=>{var s,n;try{const x=(await k.get(`/bundles/${l}`)).data,y=await k.get(`/bundles/export/${l}`,{responseType:"blob"}),z=new Blob([y.data],{type:"application/zip"}),Q=window.URL.createObjectURL(z),T=document.createElement("a");T.href=Q,T.download=`bundle_${e.replace(/\s+/g,"_")}_v${x.version||"1.0.0"}.zip`,document.body.appendChild(T),T.click(),document.body.removeChild(T),window.URL.revokeObjectURL(Q),o(`Bundle "${e}" downloaded successfully`)}catch(m){console.error("Error downloading bundle:",m),f("Failed to download bundle: "+(((n=(s=m.response)==null?void 0:s.data)==null?void 0:n.detail)||m.message))}};return(l,e)=>{const s=He("FontAwesomeIcon");return u(),d("div",Qe,[H.value?(u(),d("div",Pt,[i(W,null,{default:N(()=>[t("div",$t,[t("div",Et,[t("button",{type:"button",class:"btn btn-xs btn-secondary mr-4",onClick:ae,title:"Return to bundle list"},[i(s,{icon:"arrow-left",class:"mr-1"}),e[34]||(e[34]=c("Back "))]),t("h2",jt,[i(s,{icon:"box-open",class:"mr-2"}),a.value.id?(u(),d("span",Mt,"Edit Bundle: "+p(a.value.name),1)):(u(),d("span",St,"Create New Bundle"))])]),t("div",Ft,[a.value.id?(u(),d("span",It,[i(s,{icon:"edit",class:"mr-1"}),e[35]||(e[35]=c("Editing "))])):(u(),d("span",zt,[i(s,{icon:"plus",class:"mr-1"}),e[36]||(e[36]=c("Creating "))]))])])]),_:1}),t("form",{onSubmit:U(Ae,["prevent"]),class:"space-y-6"},[i(W,null,{default:N(()=>[t("div",{class:"flex justify-between items-center cursor-pointer p-1 -m-1 rounded hover:bg-background-soft transition-colors",onClick:e[0]||(e[0]=n=>L.value=!L.value)},[t("h4",Ut,[i(s,{icon:"info-circle",class:"mr-2"}),e[37]||(e[37]=c("General Information "))]),i(s,{icon:L.value?"chevron-up":"chevron-down",class:"text-text-muted"},null,8,["icon"])]),L.value?(u(),d("div",Dt,[t("div",Rt,[t("div",null,[t("label",Tt,[i(s,{icon:"tag",class:"mr-2"}),e[38]||(e[38]=c("Name "))]),$(t("input",{type:"text",class:"form-input w-full","onUpdate:modelValue":e[1]||(e[1]=n=>a.value.name=n),required:""},null,512),[[E,a.value.name]])]),t("div",null,[t("label",At,[i(s,{icon:"code-branch",class:"mr-2"}),e[39]||(e[39]=c("Version "))]),$(t("input",{type:"text",class:"form-input w-full","onUpdate:modelValue":e[2]||(e[2]=n=>a.value.version=n),placeholder:"1.0.0",pattern:"^\\d+\\.\\d+\\.\\d+$",title:"Version must be in x.y.z format (e.g., 1.0.0)"},null,512),[[E,a.value.version]])])]),t("div",Nt,[t("div",null,[t("label",Wt,[i(s,{icon:"user",class:"mr-2"}),e[40]||(e[40]=c("Author "))]),$(t("input",{type:"text",class:"form-input w-full","onUpdate:modelValue":e[3]||(e[3]=n=>a.value.author=n),placeholder:"Bundle author"},null,512),[[E,a.value.author]])]),t("div",null,[t("label",Lt,[i(s,{icon:"globe",class:"mr-2"}),e[41]||(e[41]=c("Website "))]),$(t("input",{type:"url",class:"form-input w-full","onUpdate:modelValue":e[4]||(e[4]=n=>a.value.website=n),placeholder:"https://example.com"},null,512),[[E,a.value.website]])])]),t("div",null,[t("label",Ot,[i(s,{icon:"info",class:"mr-2"}),e[42]||(e[42]=c("Description "))]),$(t("textarea",{class:"form-input w-full","onUpdate:modelValue":e[5]||(e[5]=n=>a.value.description=n),rows:"3",placeholder:"Describe your bundle..."},null,512),[[E,a.value.description]])])])):h("",!0)]),_:1}),i(W,null,{default:N(()=>[t("div",{class:"flex justify-between items-center cursor-pointer p-1 -m-1 rounded hover:bg-background-soft transition-colors",onClick:e[6]||(e[6]=n=>O.value=!O.value)},[t("h4",Vt,[i(s,{icon:"sitemap",class:"mr-2"}),e[43]||(e[43]=c("Workflows ")),a.value.workflows.length>0?(u(),d("span",Ht," ("+p(a.value.workflows.length)+" selected) ",1)):h("",!0)]),i(s,{icon:O.value?"chevron-up":"chevron-down",class:"text-text-muted"},null,8,["icon"])]),O.value?(u(),d("div",Gt,[t("div",Kt,[a.value.workflows.length>0?(u(),d("div",qt,[(u(!0),d(B,null,C(a.value.workflows,n=>(u(),d("span",{key:n,class:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-600 text-white group"},[i(s,{icon:"file-code",class:"mr-1"}),c(p(n)+" ",1),t("button",{type:"button",class:"ml-2 w-4 h-4 flex items-center justify-center rounded-full bg-blue-500 hover:bg-red-500 text-white text-xs transition-colors duration-200 flex-shrink-0",onClick:U(m=>De(n),["stop"]),title:"Remove workflow"},[i(s,{icon:"times"})],8,Qt)]))),128))])):(u(),d("div",Yt,[i(s,{icon:"info-circle",class:"mr-1"}),e[44]||(e[44]=c("No workflows selected. Choose from the dropdown below. "))]))]),t("div",Zt,[t("button",{type:"button",class:"form-input w-full text-left flex items-center justify-between",onClick:e[7]||(e[7]=n=>F.value=!F.value)},[t("span",Jt,[i(s,{icon:"plus-circle",class:"mr-2"}),e[45]||(e[45]=c("Add Workflows "))]),i(s,{icon:F.value?"chevron-up":"chevron-down"},null,8,["icon"])]),F.value?(u(),d("div",Xt,[oe.value.length>0?(u(),d("div",es,[(u(!0),d(B,null,C(oe.value,n=>(u(),d("div",{key:n,class:"flex items-center px-3 py-2 hover:bg-background-mute cursor-pointer rounded",onClick:m=>Ue(n)},[i(s,{icon:"file-code",class:"mr-2 text-blue-600"}),t("span",null,p(n),1)],8,ts))),128))])):(u(),d("div",ss,[i(s,{icon:"info-circle",class:"mr-1"}),e[46]||(e[46]=c("All workflows are already selected "))]))])):h("",!0)]),le.value.length>0?(u(),d("div",ls,[t("div",os,[i(s,{icon:"exclamation-triangle",class:"mr-1"}),e[47]||(e[47]=t("strong",null,"Missing workflows:",-1)),e[48]||(e[48]=t("span",{class:"ml-1 text-sm"},"These workflows are referenced in this bundle but are not available in the system.",-1))]),t("div",ns,[(u(!0),d(B,null,C(le.value,n=>(u(),d("span",{key:n,class:"inline-flex items-center px-2 py-1 rounded text-xs bg-yellow-100 text-yellow-800 group"},[i(s,{icon:"file-code",class:"mr-1"}),c(p(n)+" ",1),t("button",{type:"button",class:"ml-2 w-4 h-4 flex items-center justify-center rounded-full bg-yellow-400 hover:bg-red-500 text-yellow-800 hover:text-white text-xs transition-colors duration-200 flex-shrink-0",onClick:U(m=>ge(n),["stop"]),title:"Remove missing workflow"},[i(s,{icon:"times"})],8,rs)]))),128))])])):h("",!0),t("div",is,[t("input",{type:"file",class:"form-input flex-1 rounded-r-none",id:"workflow-file",onChange:we,accept:".json"},null,32),t("button",{class:"btn btn-outline rounded-l-none border-l-0",type:"button",onClick:ye},[i(s,{icon:"upload",class:"mr-1"}),e[49]||(e[49]=c("Upload New Workflow "))])])])):h("",!0)]),_:1}),i(W,null,{default:N(()=>{var n;return[t("div",{class:"flex justify-between items-center cursor-pointer p-1 -m-1 rounded hover:bg-background-soft transition-colors",onClick:e[8]||(e[8]=m=>V.value=!V.value)},[t("h4",as,[i(s,{icon:"server",class:"mr-2"}),e[50]||(e[50]=c("Hardware Profiles & Models ")),Object.keys(a.value.hardware_profiles).length>0?(u(),d("span",ds," ("+p(Object.keys(a.value.hardware_profiles).length)+" profiles) ",1)):h("",!0)]),i(s,{icon:V.value?"chevron-up":"chevron-down",class:"text-text-muted"},null,8,["icon"])]),V.value?(u(),d("div",us,[t("div",cs,[t("div",fs,[t("div",ms,[(u(!0),d(B,null,C(a.value.hardware_profiles,(m,x)=>(u(),d("div",{key:x,class:"flex-shrink-0 border-r border-border relative"},[t("div",ps,[t("button",{type:"button",class:Ke(["flex-1 px-4 py-3 text-sm font-medium transition-colors flex items-center min-w-0",v.value===x?"bg-background text-text-light border-b-2 border-primary":"text-text-muted hover:text-text-light hover:bg-background-soft"]),onClick:y=>v.value=x},[t("div",vs,[i(s,{icon:"microchip",class:"mr-2 flex-shrink-0"}),t("span",bs,p(x),1),t("span",hs,"("+p(G(ue(m)))+")",1)])],10,xs),t("button",{type:"button",class:"ml-2 p-1 text-xs text-text-muted hover:text-text-light hover:bg-background-soft rounded flex-shrink-0 profile-actions-container",onClick:U(y=>je(x,y),["stop"]),title:"Profile actions"},[i(s,{icon:"cogs"})],8,gs)])]))),128)),t("button",{type:"button",class:"flex-shrink-0 px-4 py-3 text-sm font-medium text-text-muted hover:text-text-light hover:bg-background-soft transition-colors flex items-center",onClick:me},[i(s,{icon:"plus",class:"mr-1"})])])]),v.value&&a.value.hardware_profiles[v.value]?(u(),d("div",ws,[t("div",null,[t("label",ys,[i(s,{icon:"info",class:"mr-2"}),e[51]||(e[51]=c("Description "))]),$(t("input",{type:"text",class:"form-input w-full","onUpdate:modelValue":e[9]||(e[9]=m=>a.value.hardware_profiles[v.value].description=m),placeholder:"Profile description"},null,512),[[E,a.value.hardware_profiles[v.value].description]])]),t("div",ks,[t("div",_s,[t("div",Bs,[i(s,{icon:"cubes",class:"mr-2 text-primary"}),e[52]||(e[52]=t("span",{class:"text-text-muted"},"Models:",-1)),t("span",Cs,p(((n=a.value.hardware_profiles[v.value].models)==null?void 0:n.length)||0),1)]),t("div",Ps,[i(s,{icon:"database",class:"mr-2 text-primary"}),e[53]||(e[53]=t("span",{class:"text-text-muted"},"Total Size:",-1)),t("span",$s,p(G(ue(a.value.hardware_profiles[v.value]))),1)])])]),t("div",null,[t("div",Es,[t("label",js,[i(s,{icon:"cubes",class:"mr-2"}),e[54]||(e[54]=c("Models for this Profile "))]),t("button",{type:"button",class:"btn btn-sm btn-outline",onClick:e[10]||(e[10]=m=>ke(v.value))},[i(s,{icon:"plus-circle",class:"mr-1"}),e[55]||(e[55]=c("Add Models "))])]),t("div",Ms,[a.value.hardware_profiles[v.value].models&&a.value.hardware_profiles[v.value].models.length>0?(u(),d("div",Ss,[(u(!0),d(B,null,C(a.value.hardware_profiles[v.value].models,(m,x)=>(u(),d("div",{key:x,class:"flex items-center justify-between p-2 bg-background rounded border"},[t("div",Fs,[t("div",Is,p(de(m)),1),t("div",zs,[t("span",Us,[i(s,{icon:"tag",class:"mr-1"}),c(p(m.type),1)]),m.tags&&m.tags.length>0?(u(),d("span",Ds,[i(s,{icon:"tags",class:"mr-1"}),c(p(m.tags.join(", ")),1)])):h("",!0),m.size?(u(),d("span",Rs,[i(s,{icon:"database",class:"mr-1"}),c(p(G(m.size)),1)])):h("",!0)])]),t("button",{type:"button",class:"ml-2 text-red-600 hover:text-red-800",onClick:y=>Ee(v.value,x),title:"Remove model"},[i(s,{icon:"trash-alt"})],8,Ts)]))),128))])):(u(),d("div",As,[i(s,{icon:"info-circle",class:"mr-1"}),e[56]||(e[56]=c("No models selected for this profile. "))]))])])])):h("",!0),Object.keys(a.value.hardware_profiles).length===0?(u(),d("div",Ns,[i(s,{icon:"server",class:"text-4xl text-text-muted mb-4"}),e[58]||(e[58]=t("h4",{class:"text-lg font-medium text-text-light mb-2"},"No Hardware Profiles",-1)),e[59]||(e[59]=t("p",{class:"text-text-muted mb-4"},"Create your first hardware profile to start adding models.",-1)),t("button",{type:"button",class:"btn btn-primary",onClick:me},[i(s,{icon:"plus-circle",class:"mr-1"}),e[57]||(e[57]=c("Create First Profile "))])])):h("",!0)])])):h("",!0)]}),_:1}),i(W,null,{default:N(()=>[t("div",Ws,[t("button",{type:"button",class:"btn btn-secondary",onClick:ae},[i(s,{icon:"arrow-left",class:"mr-1"}),e[60]||(e[60]=c("Back "))]),t("div",Ls,[t("button",{type:"button",class:"btn btn-outline",onClick:q},[i(s,{icon:"undo",class:"mr-1"}),e[61]||(e[61]=c("Reset Form "))]),t("button",Os,[i(s,{icon:a.value.id?"save":"plus",class:"mr-1"},null,8,["icon"]),c(" "+p(a.value.id?"Update":"Create")+" Bundle ",1)])])])]),_:1})],32)])):(u(),d("div",Ye,[e[33]||(e[33]=t("h2",{class:"text-xl font-semibold text-text-light mb-4"},"Bundle Manager",-1)),t("div",Ze,[t("h4",Je,[i(s,{icon:"box-open",class:"mr-2"}),e[19]||(e[19]=c("Model Bundles "))]),t("p",Xe,[i(s,{icon:"info-circle",class:"mr-2"}),e[20]||(e[20]=c("Create predefined bundles of models with associated workflows. "))]),Object.keys(Y.value).length>0?(u(),d("div",et,[t("table",tt,[t("thead",st,[t("tr",null,[t("th",lt,[i(s,{icon:"tag",class:"mr-1"}),e[21]||(e[21]=c("Name "))]),t("th",ot,[i(s,{icon:"code-branch",class:"mr-1"}),e[22]||(e[22]=c("Version "))]),t("th",nt,[i(s,{icon:"user",class:"mr-1"}),e[23]||(e[23]=c("Author "))]),t("th",rt,[i(s,{icon:"info",class:"mr-1"}),e[24]||(e[24]=c("Description "))]),t("th",it,[i(s,{icon:"sitemap",class:"mr-1"}),e[25]||(e[25]=c("Workflows "))]),t("th",at,[i(s,{icon:"server",class:"mr-1"}),e[26]||(e[26]=c("Hardware Profiles "))]),t("th",dt,[i(s,{icon:"cogs",class:"mr-1"}),e[27]||(e[27]=c("Actions "))])])]),t("tbody",ut,[(u(!0),d(B,null,C(Y.value,n=>(u(),d("tr",{key:n.id,class:"hover:bg-background-mute"},[t("td",ct,p(n.name),1),t("td",ft,p(n.version||"1.0.0"),1),t("td",mt,p(n.author||"N/A"),1),t("td",pt,p(n.description),1),t("td",xt,[t("div",vt,[(u(!0),d(B,null,C(n.workflows||[],m=>(u(),d("span",{key:m,class:"inline-flex items-center px-2 py-1 rounded text-xs bg-blue-600 text-white"},[i(s,{icon:"file-code",class:"mr-1"}),c(p(m),1)]))),128))])]),t("td",bt,[t("div",ht,[(u(!0),d(B,null,C(n.hardware_profiles||{},(m,x)=>{var y;return u(),d("span",{key:x,class:"inline-flex items-center px-2 py-1 rounded text-xs bg-gray-600 text-white"},[i(s,{icon:"microchip",class:"mr-1"}),c(p(x)+" ("+p(((y=m.models)==null?void 0:y.length)||0)+" models) ",1)])}),128))])]),t("td",gt,[t("div",wt,[t("button",{class:"px-3 py-1 text-xs bg-btn-default text-white rounded hover:bg-btn-default-hover transition-colors",onClick:m=>Re(n.id)},[i(s,{icon:"edit",class:"mr-1"}),e[28]||(e[28]=c("Edit "))],8,yt),t("button",{class:"px-3 py-1 text-xs bg-green-600 text-white rounded hover:bg-green-700 transition-colors",onClick:m=>Ne(n.id,n.name),title:"Download bundle as ZIP"},[i(s,{icon:"download",class:"mr-1"}),e[29]||(e[29]=c("Download "))],8,kt),t("button",{class:"px-3 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700 transition-colors",onClick:m=>Te(n.id)},[i(s,{icon:"trash-alt",class:"mr-1"}),e[30]||(e[30]=c("Delete "))],8,_t)])])]))),128))])])])):(u(),d("div",Bt,[i(s,{icon:"info-circle",class:"mr-2 mt-0.5"}),e[31]||(e[31]=t("span",null,"No bundles available. Create your first bundle below.",-1))])),t("div",Ct,[t("button",{type:"button",class:"btn btn-primary",onClick:he},[i(s,{icon:"plus-circle",class:"mr-1"}),e[32]||(e[32]=c("New Bundle "))])])])])),w.value?(u(),d("div",{key:2,class:"fixed bg-background border border-border rounded shadow-lg z-[9999] min-w-[150px] profile-actions-container",style:pe({top:X.value.top,left:X.value.left}),onClick:e[14]||(e[14]=U(()=>{},["stop"]))},[t("button",{type:"button",class:"w-full px-3 py-2 text-left text-sm text-text-light hover:bg-background-soft flex items-center",onClick:e[11]||(e[11]=n=>Se(w.value))},[i(s,{icon:"edit",class:"mr-2"}),e[62]||(e[62]=c("Rename "))]),t("button",{type:"button",class:"w-full px-3 py-2 text-left text-sm text-text-light hover:bg-background-soft flex items-center",onClick:e[12]||(e[12]=n=>Fe(w.value))},[i(s,{icon:"copy",class:"mr-2"}),e[63]||(e[63]=c("Clone "))]),t("button",{type:"button",class:"w-full px-3 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center",onClick:e[13]||(e[13]=n=>Ie(w.value))},[i(s,{icon:"trash-alt",class:"mr-2"}),e[64]||(e[64]=c("Delete "))])],4)):h("",!0),J.value?(u(),d("div",Vs,[t("div",Hs,[t("div",Gs,[t("h3",Ks,"Select Models for "+p(I.value),1),t("button",{type:"button",class:"text-text-muted hover:text-text-light",onClick:se},[i(s,{icon:"times",class:"text-xl"})])]),t("div",qs,[t("button",{type:"button",class:"w-full px-4 py-3 flex items-center justify-between hover:bg-background transition-colors",onClick:e[15]||(e[15]=n=>j.value=!j.value)},[t("div",Qs,[i(s,{icon:"filter",class:"mr-2"}),e[65]||(e[65]=t("span",{class:"font-medium text-text-light"},"Filter Models",-1)),_.value?(u(),d("span",Ys,"("+p(re.value)+" models)",1)):h("",!0)]),i(s,{icon:j.value?"chevron-up":"chevron-down",class:"text-text-muted"},null,8,["icon"])]),j.value?(u(),d("div",Zs,[t("div",Js,[t("div",Xs,[t("label",el,[i(s,{icon:"search",class:"mr-2"}),e[66]||(e[66]=c("Filter by Tags "))]),$(t("input",{type:"text",class:"form-input w-full text-sm","onUpdate:modelValue":e[16]||(e[16]=n=>_.value=n),placeholder:"Enter tags to filter models (e.g., base, fp8, nsfw...)"},null,512),[[E,_.value]]),e[67]||(e[67]=t("p",{class:"text-xs text-text-muted mt-1"}," Separate multiple tags with commas. Models matching any of these tags will be shown. ",-1))]),t("div",tl,[t("button",{type:"button",class:"btn btn-sm btn-outline mb-2",onClick:_e,disabled:!_.value},[i(s,{icon:"times",class:"mr-1"}),e[68]||(e[68]=c("Clear "))],8,sl),t("div",ll,p(re.value)+" models ",1)])]),ne.value.length>0?(u(),d("div",ol,[e[69]||(e[69]=t("label",{class:"text-xs text-text-muted mb-2 block"},"Popular tags:",-1)),t("div",nl,[(u(!0),d(B,null,C(ne.value,n=>(u(),d("button",{key:n,type:"button",class:"px-2 py-1 text-xs rounded bg-gray-200 hover:bg-gray-300 text-gray-700 transition-colors",onClick:m=>Be(n)},p(n),9,rl))),128))])])):h("",!0)])):h("",!0)]),t("div",{class:"p-4 overflow-y-auto",style:pe({"max-height":j.value?"45vh":"55vh"})},[(u(!0),d(B,null,C(te.value,(n,m)=>(u(),d("div",{key:m,class:"mb-6"},[t("h4",il,[i(s,{icon:"folder",class:"mr-2"}),c(p(m)+" ",1),t("span",al,"("+p(n.length)+" models)",1)]),t("div",dl,[(u(!0),d(B,null,C(n,(x,y)=>(u(),d("div",{key:y,class:"flex items-center p-3 border border-border rounded hover:bg-background-mute cursor-pointer",onClick:z=>Ce(x)},[t("input",{type:"checkbox",checked:Pe(x),class:"mr-3",onClick:e[17]||(e[17]=U(()=>{},["stop"]))},null,8,cl),t("div",fl,[t("div",ml,p(de(x)),1),t("div",pl,[t("span",xl,[i(s,{icon:"tag",class:"mr-1"}),c(p(x.type),1)]),x.tags&&x.tags.length>0?(u(),d("span",vl,[i(s,{icon:"tags",class:"mr-1"}),c(p(x.tags.join(", ")),1)])):h("",!0),x.size?(u(),d("span",bl,[i(s,{icon:"database",class:"mr-1"}),c(p(G(x.size)),1)])):h("",!0)])])],8,ul))),128))])]))),128)),Object.keys(te.value).length===0?(u(),d("div",hl,[i(s,{icon:"search",class:"text-4xl text-text-muted mb-4"}),e[70]||(e[70]=t("h4",{class:"text-lg font-medium text-text-light mb-2"},"No models found",-1)),e[71]||(e[71]=t("p",{class:"text-text-muted"}," No models match the current filter criteria. Try adjusting your tag filters. ",-1))])):h("",!0)],4),t("div",gl,[t("button",{type:"button",class:"btn btn-secondary",onClick:se}," Cancel "),t("button",{type:"button",class:"btn btn-primary",onClick:$e}," Apply Selection ("+p(P.value.length)+" selected) ",1)])])])):h("",!0),ee.value?(u(),d("div",wl,[t("div",yl,[t("div",kl,[e[72]||(e[72]=t("h3",{class:"text-lg font-semibold text-text-light"},"Rename Profile",-1)),t("button",{type:"button",class:"text-text-muted hover:text-text-light",onClick:K},[i(s,{icon:"times",class:"text-xl"})])]),t("div",_l,[t("label",Bl,[i(s,{icon:"tag",class:"mr-2"}),e[73]||(e[73]=c("Profile Name "))]),$(t("input",{ref:"renameProfileInput",type:"text",class:"form-input w-full","onUpdate:modelValue":e[18]||(e[18]=n=>S.value=n),onKeyup:[xe(fe,["enter"]),xe(K,["escape"])],placeholder:"Enter new profile name"},null,544),[[E,S.value]])]),t("div",Cl,[t("button",{type:"button",class:"btn btn-secondary",onClick:K}," Cancel "),t("button",{type:"button",class:"btn btn-primary",onClick:fe,disabled:!S.value.trim()},[i(s,{icon:"save",class:"mr-1"}),e[74]||(e[74]=c("Rename "))],8,Pl)])])])):h("",!0)])}}},Ml=Le($l,[["__scopeId","data-v-216e1ab8"]]);export{Ml as default};
